# ä¸­å›½æ»‘é›ªèµ›äº‹ç§¯åˆ†ç³»ç»Ÿ

ä¸­å›½ç»¼åˆæ€§æ»‘é›ªèµ›äº‹ç§¯åˆ†ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒ**é«˜å±±æ»‘é›ª**ã€**è‡ªç”±å¼æ»‘é›ª**ã€**å•æ¿æ»‘é›ª**ä¸‰å¤§é¡¹ç›®çš„ç«èµ›æ•°æ®ç®¡ç†å’Œç§¯åˆ†è®¡ç®—ã€‚

## ğŸ”ï¸ é¡¹ç›®æ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯åŸºäºã€Šä¸­å›½é«˜å±±æ»‘é›ªèµ›äº‹ç§¯åˆ†è§„åˆ™v4.docxã€‹å’Œã€Š2025-2026èµ›å­£å…¨å›½BAã€SSé’å°‘å¹´Uç³»åˆ—æ¯”èµ›æ–¹æ¡ˆã€‹æ„å»ºçš„å®Œæ•´ä¸­å›½æ»‘é›ªè¿åŠ¨ç§¯åˆ†ç®¡ç†å¹³å°ï¼Œæ¶µç›–å¤šé¡¹ç›®ç«èµ›æ•°æ®ç®¡ç†ã€åŒç§¯åˆ†ä½“ç³»è®¡ç®—ã€Uç³»åˆ—é’å°‘å¹´ç®¡ç†ã€åœºåœ°æ ‡å‡†è®¤è¯ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### ğŸ¿ æ”¯æŒé¡¹ç›®
- **é«˜å±±æ»‘é›ª**: é€Ÿé™(DH)ã€å›è½¬(SL)ã€å¤§å›è½¬(GS)ã€è¶…çº§å¤§å›è½¬(SG)ã€å…¨èƒ½(AC)
- **è‡ªç”±å¼æ»‘é›ª**: å¤§è·³å°(BA)ã€å¡é¢éšœç¢æŠ€å·§(SS)ã€Uå‹åœºåœ°(HP)
- **å•æ¿æ»‘é›ª**: å¤§è·³å°(BA)ã€å¡é¢éšœç¢æŠ€å·§(SS)ã€Uå‹åœºåœ°(HP)ã€å¹³è¡Œé¡¹ç›®(PSL/PGS)

### ğŸ… ç§¯åˆ†ä½“ç³»
- **é«˜å±±æ»‘é›ª**: åŸºäºæ—¶é—´çš„v4.0ç§¯åˆ†è®¡ç®— (A/B/Cçº§ç³»æ•°ä½“ç³»)
- **è‡ªç”±å¼/å•æ¿æ»‘é›ª**: åŸºäºæ’åçš„240/360/120åˆ†æ¡£ç§¯åˆ†ä½“ç³»
- **Uç³»åˆ—ç®¡ç†**: U12/U15/U18é’å°‘å¹´åˆ†ç»„ç‹¬ç«‹ç§¯åˆ†æ’å

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¯ ç«èµ›æ•°æ®ç®¡ç†
- **æ•°æ®å¯¼å…¥**: æ”¯æŒFISæ ‡å‡†XMLæ ¼å¼ç«èµ›æ•°æ®å¯¼å…¥
- **æ•°æ®è§£æ**: è‡ªåŠ¨è§£ææ¯”èµ›ç»“æœã€è¿åŠ¨å‘˜ä¿¡æ¯ã€èµ›é“æ¡ä»¶ç­‰
- **æ•°æ®å­˜å‚¨**: ç»“æ„åŒ–å­˜å‚¨å†å²æ¯”èµ›æ•°æ®
- **æ•°æ®æŸ¥è¯¢**: æ”¯æŒå¤šç»´åº¦æ•°æ®æ£€ç´¢å’Œç­›é€‰

### ğŸ“Š FISç§¯åˆ†è®¡ç®—ç³»ç»Ÿ
- **æ ‡å‡†åŒ–è®¡ç®—**: åŸºäºFISå®˜æ–¹ç§¯åˆ†è§„åˆ™è‡ªåŠ¨è®¡ç®—
- **å®æ—¶æ›´æ–°**: æ¯”èµ›ç»“æŸåè‡ªåŠ¨æ›´æ–°è¿åŠ¨å‘˜ç§¯åˆ†
- **ç§¯åˆ†å†å²**: è¿½è¸ªè¿åŠ¨å‘˜ç§¯åˆ†å˜åŒ–è¶‹åŠ¿
- **æ’åç³»ç»Ÿ**: åŸºäºç§¯åˆ†çš„å®æ—¶æ’åæ›´æ–°

### ğŸ“š è§„åˆ™ç®¡ç†
- **è§„åˆ™åº“**: æ•°å­—åŒ–å­˜å‚¨ç«èµ›è§„åˆ™æ–‡æ¡£
- **è§„åˆ™æŸ¥è¯¢**: æ”¯æŒå…³é”®è¯æœç´¢å’Œåˆ†ç±»æŸ¥è¯¢
- **ä¸­è‹±å¯¹ç…§**: æ”¯æŒä¸­è‹±æ–‡è§„åˆ™å¯¹ç…§æŸ¥çœ‹

### ğŸ† æˆç»©ç®¡ç†
- **æˆç»©å½•å…¥**: æ”¯æŒæ‰‹åŠ¨å’Œæ‰¹é‡æˆç»©å½•å…¥
- **æˆç»©ç»Ÿè®¡**: è¿åŠ¨å‘˜ä¸ªäººå’Œå›¢ä½“æˆç»©ç»Ÿè®¡
- **æˆç»©æ’å**: å¤šé¡¹ç›®ã€å¤šçº§åˆ«æˆç»©æ’å
- **æˆç»©éªŒè¯**: æˆç»©æ•°æ®æ ¡éªŒå’Œå¼‚å¸¸æ£€æµ‹

### ğŸ“ åœ¨çº¿æŠ¥åç³»ç»Ÿ
- **åœ¨çº¿æŠ¥å**: è¿åŠ¨å‘˜/æ•™ç»ƒå‘˜åœ¨çº¿æŠ¥åå‚èµ›
- **èµ„æ ¼å®¡æŸ¥**: è‡ªåŠ¨éªŒè¯å‚èµ›èµ„æ ¼å’Œç§¯åˆ†è¦æ±‚
- **æŠ¥åç®¡ç†**: æŠ¥åä¿¡æ¯å®¡æ ¸ã€ä¿®æ”¹ã€å–æ¶ˆ
- **è´¹ç”¨ç®¡ç†**: æŠ¥åè´¹ç”¨è®¡ç®—å’Œæ”¯ä»˜é›†æˆ
- **åå•å¯¼å‡º**: ç”Ÿæˆå‚èµ›åå•å’Œèµ·è·‘é¡ºåº

### ğŸ“ˆ æŠ¥è¡¨ç”Ÿæˆ
- **æ¯”èµ›æŠ¥å‘Š**: è‡ªåŠ¨ç”Ÿæˆæ¯”èµ›ç»“æœæŠ¥å‘Š
- **ç§¯åˆ†æŠ¥è¡¨**: è¿åŠ¨å‘˜ç§¯åˆ†å˜åŒ–æŠ¥è¡¨
- **ç»Ÿè®¡åˆ†æ**: æ¯”èµ›æ•°æ®ç»Ÿè®¡åˆ†æå›¾è¡¨
- **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒPDFã€Excelç­‰æ ¼å¼å¯¼å‡º

## ğŸ§® FISç§¯åˆ†è®¡ç®—è§„åˆ™è¯¦è§£

### ğŸ“ æ ¸å¿ƒè®¡ç®—å…¬å¼

#### 1. æ¯”èµ›ç§¯åˆ†è®¡ç®—å…¬å¼
```javascript
// é«˜å±±æ»‘é›ªæ ‡å‡†å…¬å¼
P = F Ã— (Tx/To - 1)
// æˆ–è€…
P = (F Ã— Tx/To) - F

// å‚æ•°è¯´æ˜:
// P = æ¯”èµ›ç§¯åˆ† (Race Points)
// To = è·èƒœè€…æ—¶é—´ (Winner's Time in seconds)
// Tx = è¢«æ’åé€‰æ‰‹æ—¶é—´ (Ranked Competitor's Time in seconds)
// F = é¡¹ç›®ç³»æ•° (Discipline Factor)
```

#### 2. æƒ©ç½šå€¼è®¡ç®—å…¬å¼
```javascript
// æƒ©ç½šå€¼ = (Sum A + Sum B - Sum C) Ã· 10
penalty = (sumA + sumB - sumC) / 10;

// å‚æ•°è¯´æ˜:
// sumA = å‰10åä¸­æœ€å¥½5åé€‰æ‰‹çš„FISç§¯åˆ†æ€»å’Œ
// sumB = æ‰€æœ‰å‚èµ›é€‰æ‰‹ä¸­æœ€å¥½5åçš„FISç§¯åˆ†æ€»å’Œ
// sumC = æœ€å¥½5åé€‰æ‰‹çš„æ¯”èµ›ç§¯åˆ†æ€»å’Œ
```

### ğŸ¯ é¡¹ç›®ç³»æ•°è¯¦è¡¨
| é¡¹ç›®ä»£ç  | é¡¹ç›®åç§° | ç³»æ•°å€¼ | æœ€å¤§ç§¯åˆ† | è¯´æ˜ |
|----------|----------|--------|----------|------|
| DH | é€Ÿé™ (Downhill) | 1250 | 330 | é«˜é€ŸæŠ€æœ¯é¡¹ç›® |
| SL | å›è½¬ (Slalom) | 730 | 165 | æŠ€æœ¯æ€§é¡¹ç›® |
| GS | å¤§å›è½¬ (Giant Slalom) | 1010 | 220 | æŠ€æœ¯é€Ÿåº¦é¡¹ç›® |
| SG | è¶…çº§å¤§å›è½¬ (Super Giant Slalom) | 1190 | 270 | é€Ÿåº¦æŠ€æœ¯é¡¹ç›® |
| AC | å…¨èƒ½ (Alpine Combined) | 1360 | 270 | ç»¼åˆé¡¹ç›® |

### ğŸ“Š ç§¯åˆ†æ›´æ–°æœºåˆ¶

#### 1. åŸºç¡€ç§¯åˆ†è¡¨(BL) - Base List
- **å‘å¸ƒæ—¶é—´**: æ¯å¹´6æœˆä¸­æ—¬
- **è®¡ç®—æ–¹æ³•**: è¿‡å»èµ›å­£æ¯ä¸ªé¡¹ç›®æœ€å¥½2ä¸ªæˆç»©çš„å¹³å‡å€¼
- **ç‰¹æ®Šå¤„ç†**:
  ```javascript
  // å•ä¸€æˆç»©å¤„ç†
  if (previousResults.length === 1) {
    return previousResults[0] * 1.20; // å¢åŠ 20% (+æ ‡è®°)
  }

  // æ— æˆç»©å¤„ç†
  if (previousResults.length === 0) {
    return previousBL * 1.50; // åœ¨ä¹‹å‰BLåŸºç¡€ä¸Šå¢åŠ 50% (>æ ‡è®°)
  }
  ```

#### 2. å¸¸è§„ç§¯åˆ†è¡¨(NL) - Normal List
- **é¦–æ¬¡å‘å¸ƒ**: 7æœˆ1æ—¥
- **æ›´æ–°é¢‘ç‡**: èµ›å­£æœŸé—´å®šæœŸæ›´æ–°
- **è®¡ç®—åŸåˆ™**: å½“å‰æœŸé—´æ¯ä¸ªé¡¹ç›®æœ€å¥½2ä¸ªæˆç»©çš„å¹³å‡å€¼

#### 3. ç‰¹æ®ŠçŠ¶æ€å¤„ç†
```javascript
const SPECIAL_STATUS = {
  INJURY_PROTECTION: 1.10,    // ä¼¤ç—…ä¿æŠ¤(#): å¢åŠ 10%
  PREGNANCY_PROTECTION: 9,    // æ€€å­•ä¿æŠ¤: æœ€å¤š9ä¸ªæœˆ
  CONFIRMED_POINTS: 4,        // ç§¯åˆ†ç¡®è®¤(C): é€€å½¹é€‰æ‰‹4ä¸ªèµ›å­£
  DOPING_VIOLATION: 'DELETE'  // åå…´å¥‹å‰‚: åˆ é™¤æ‰€æœ‰FISç§¯åˆ†
};
```

### ğŸ† ç§¯åˆ†è®¡ç®—å®ç°

#### æ ¸å¿ƒè®¡ç®—å¼•æ“
```javascript
class FISPointsCalculator {
  /**
   * è®¡ç®—æ¯”èµ›ç§¯åˆ†
   * @param {number} winnerTime è·èƒœè€…æ—¶é—´(ç§’)
   * @param {number} competitorTime é€‰æ‰‹æ—¶é—´(ç§’)
   * @param {string} discipline é¡¹ç›®ä»£ç 
   * @returns {number} æ¯”èµ›ç§¯åˆ†
   */
  calculateRacePoints(winnerTime, competitorTime, discipline) {
    const F = DISCIPLINE_FACTORS[discipline];
    return F * (competitorTime / winnerTime - 1);
  }

  /**
   * è®¡ç®—æƒ©ç½šå€¼
   * @param {number[]} top10FISPoints å‰10åFISç§¯åˆ†
   * @param {number[]} allCompetitorsFISPoints æ‰€æœ‰é€‰æ‰‹FISç§¯åˆ†
   * @param {number[]} top5RacePoints å‰5åæ¯”èµ›ç§¯åˆ†
   * @returns {number} æƒ©ç½šå€¼
   */
  calculatePenalty(top10FISPoints, allCompetitorsFISPoints, top5RacePoints) {
    const sumA = this.getBest5Points(top10FISPoints);
    const sumB = this.getBest5Points(allCompetitorsFISPoints);
    const sumC = top5RacePoints.slice(0, 5).reduce((a, b) => a + b, 0);

    return Math.max(0, (sumA + sumB - sumC) / 10);
  }

  /**
   * è·å–æœ€å¥½5ä¸ªç§¯åˆ†
   * @param {number[]} points ç§¯åˆ†æ•°ç»„
   * @returns {number} å‰5ä¸ªç§¯åˆ†ä¹‹å’Œ
   */
  getBest5Points(points) {
    const sorted = points.sort((a, b) => a - b);
    return sorted.slice(0, 5).reduce((a, b) => a + b, 0);
  }

  /**
   * ç§¯åˆ†èˆå…¥è§„åˆ™
   * @param {number} points åŸå§‹ç§¯åˆ†
   * @returns {number} èˆå…¥åç§¯åˆ†
   */
  roundPoints(points) {
    // ä»0.0004å‘ä¸‹èˆå…¥ï¼Œä»0.0005å‘ä¸Šèˆå…¥
    return Math.round(points * 100) / 100;
  }
}
```

### ğŸŒ å›½é™…æ’åç³»ç»Ÿ

#### 1. è¯„ä¼°å‘¨æœŸç®¡ç†
```javascript
const EVALUATION_PERIODS = {
  NORTHERN_HEMISPHERE: {
    start: '11æœˆç¬¬äºŒä¸ªå‘¨æœ«',
    end: '4æœˆ30æ—¥',
    description: 'åŒ—åŠçƒé›ªå­£'
  },
  SOUTHERN_HEMISPHERE: {
    start: '7æœˆ1æ—¥',
    end: '10æœˆ15æ—¥',
    description: 'å—åŠçƒé›ªå­£'
  }
};
```

#### 2. å‚èµ›é…é¢è®¡ç®—
```javascript
/**
 * è®¡ç®—å›½å®¶é˜Ÿå‚èµ›é…é¢
 * @param {number} rankingPosition å›½å®¶æœ€ä½³æ’åä½ç½®
 * @param {number} athleteCount ç¬¦åˆæ¡ä»¶çš„è¿åŠ¨å‘˜æ•°é‡
 * @returns {number} å‚èµ›é…é¢
 */
function calculateQuota(rankingPosition, athleteCount) {
  if (rankingPosition <= 150) {
    if (athleteCount >= 10) return 10;
    if (athleteCount >= 9) return 9;
    if (athleteCount >= 8) return 8;
    if (athleteCount >= 7) return 7;
    return Math.min(athleteCount, 6); // 1-6åé€‰æ‰‹
  } else if (rankingPosition <= 300) {
    return athleteCount >= 2 ? 5 : 4;
  }
  return 0; // ä¸ç¬¦åˆå‚èµ›æ¡ä»¶
}
```

### ğŸ”¢ å›½å†…ç§¯åˆ†ç³»ç»Ÿ

#### 1. å›½å†…åŸºç¡€ç§¯åˆ†è¡¨åˆ›å»º
```javascript
class DomesticPointsSystem {
  /**
   * åˆ›å»ºå›½å†…åŸºç¡€ç§¯åˆ†è¡¨
   * @param {Array} fisRegisteredAthletes FISæ³¨å†Œè¿åŠ¨å‘˜
   * @returns {Array} å›½å†…ç§¯åˆ†è¡¨
   */
  createDomesticBaseList(fisRegisteredAthletes) {
    // æŒ‰é¡¹ç›®åˆ†ç±»æ’åºï¼Œç¬¬ä¸€åä¸º0åˆ†
    const sorted = fisRegisteredAthletes.sort((a, b) => a.fisPoints - b.fisPoints);
    const champion = sorted[0];

    return sorted.map(athlete => ({
      ...athlete,
      domesticPoints: athlete.fisPoints - champion.fisPoints,
      rank: sorted.indexOf(athlete) + 1
    }));
  }

  /**
   * ç§¯åˆ†å‘¨æœŸæ›´æ–°æµç¨‹
   * @param {Array} raceResults æ¯”èµ›ç»“æœ
   * @returns {Array} æ›´æ–°åæ’å
   */
  updatePointsCycle(raceResults) {
    // 1. æ¯”èµ›æˆç»©ç¡®è®¤
    const confirmedResults = this.confirmResults(raceResults);

    // 2. æ’åè®¡ç®—
    const rankings = this.calculateRankings(confirmedResults);

    // 3. æ¢ç®—å…¬å¼åº”ç”¨
    const racePoints = this.applyConversionFormula(rankings);

    // 4. å‡å»ç½šåˆ†
    const finalPoints = this.applyPenalty(racePoints);

    // 5. å½¢æˆä¸–ç•Œæ’å
    return this.generateWorldRanking(finalPoints);
  }
}
```

#### 2. åˆ†ç«™èµ›ç§¯åˆ†ç³»ç»Ÿ
```javascript
const STAGE_RACE_POINTS = {
  1: 1000,   // å† å†›
  2: 800,    // äºšå†›
  3: 600,    // å­£å†›
  4: 500,    // ç¬¬å››å
  5: 400,    // ç¬¬äº”å
  6: 360,    // ç¬¬å…­å
  7: 320,    // ç¬¬ä¸ƒå
  8: 290,    // ç¬¬å…«å
  9: 260,    // ç¬¬ä¹å
  10: 240,   // ç¬¬åå
  // ... å…¶ä»–åæ¬¡é€’å‡
};

/**
 * æ€»å†³èµ›ç§¯åˆ†è®¡ç®—
 * @param {Array} stageResults åˆ†ç«™èµ›æˆç»©
 * @returns {number} æ€»ç§¯åˆ†
 */
function calculateFinalPoints(stageResults) {
  return stageResults.reduce((total, stage) => {
    return total + (STAGE_RACE_POINTS[stage.position] || 0);
  }, 0);
}
```

### ğŸ›¡ï¸ ç‰¹æ®Šæƒ…å†µå¤„ç†

#### 1. æ•°æ®éªŒè¯å’Œå¼‚å¸¸å¤„ç†
```javascript
class SpecialCaseHandler {
  /**
   * ä¼¤ç—…ä¿æŠ¤å¤„ç†
   * @param {number} currentBL å½“å‰åŸºç¡€ç§¯åˆ†
   * @returns {number} ä¿æŠ¤åç§¯åˆ†
   */
  handleInjuryProtection(currentBL) {
    return currentBL * 1.10; // åœ¨BLåŸºç¡€ä¸ŠåŠ 10%
  }

  /**
   * åå…´å¥‹å‰‚å¤„ç†
   * @param {string} athleteId è¿åŠ¨å‘˜ID
   */
  handleDopingViolation(athleteId) {
    // åˆ é™¤æ‰€æœ‰FISç§¯åˆ†
    this.deleteAllFISPoints(athleteId);
    this.addViolationRecord(athleteId);
    this.notifyFISDatabase(athleteId);
  }

  /**
   * ç½šåˆ†ä¸è¶³5äººå¤„ç†
   * @param {Array} availablePoints å¯ç”¨ç§¯åˆ†
   * @param {string} discipline é¡¹ç›®
   * @returns {Array} è¡¥è¶³çš„ç§¯åˆ†æ•°ç»„
   */
  handleInsufficientParticipants(availablePoints, discipline) {
    const maxValues = MAX_POINTS[discipline];
    const needed = 5 - availablePoints.length;

    // ç”¨æœ€å¤§å€¼è¡¥è¶³åˆ°5ä¸ª
    for (let i = 0; i < needed; i++) {
      availablePoints.push(maxValues);
    }

    return availablePoints.slice(0, 5);
  }

  /**
   * å¹¶åˆ—æƒ…å†µå¤„ç†
   * @param {Array} tiedAthletes å¹¶åˆ—è¿åŠ¨å‘˜
   * @param {number} position å¹¶åˆ—ä½ç½®
   * @returns {Array} å¤„ç†åçš„æ’å
   */
  handleTiedPositions(tiedAthletes, position) {
    if (position === 10) {
      // ç¬¬10åå¹¶åˆ—: æ‰€æœ‰å¹¶åˆ—é€‰æ‰‹éƒ½å‚ä¸æƒ©ç½šå€¼è®¡ç®—
      return tiedAthletes.map(athlete => ({ ...athlete, rank: 10 }));
    }

    if (position <= 5) {
      // å‰5åå¹¶åˆ—: é€‰æ‹©æ¯”èµ›ç§¯åˆ†æ›´é«˜è€…å‚ä¸è®¡ç®—
      return tiedAthletes.sort((a, b) => b.racePoints - a.racePoints);
    }

    return tiedAthletes;
  }
}
```

### ğŸ“‹ ç«èµ›ç®¡ç†è§„åˆ™

#### 1. ç«èµ›ç»„ç»‡è§„åˆ™è¡¨
```javascript
const COMPETITION_RULES = {
  // ç”µå­åª’ä½“æƒåˆ©ç®¡ç†
  MEDIA_RIGHTS: {
    rules: '208-209',
    description: 'ç«èµ›è½¬æ’­å’Œåª’ä½“æƒåˆ©ç®¡ç†',
    requirements: ['è½¬æ’­æƒç”³è¯·', 'ä¿¡å·åˆ¶ä½œæ ‡å‡†', 'ç‰ˆæƒä¿æŠ¤']
  },

  // ç«èµ›ç»„ç»‡ç¨‹åº
  ORGANIZATION: {
    rules: '210-219',
    description: 'èµ›äº‹ç­¹å¤‡å’Œç»„ç»‡æµç¨‹',
    phases: ['ç”³åŠ', 'å‡†å¤‡', 'æ‰§è¡Œ', 'æ€»ç»“']
  },

  // å‚èµ›èµ„æ ¼
  ELIGIBILITY: {
    rules: '605-610',
    description: 'è¿åŠ¨å‘˜å‚èµ›èµ„æ ¼å’Œå¹´é¾„é™åˆ¶',
    criteria: ['FISæ³¨å†Œ', 'å¹´é¾„è¦æ±‚', 'ç§¯åˆ†é—¨æ§›', 'åŒ»ç–—æ£€æŸ¥']
  },

  // ç«èµ›æ‰§è¡Œ
  EXECUTION: {
    rules: '611-617',
    description: 'æ¯”èµ›ç°åœºæ‰§è¡Œç¨‹åº',
    stages: ['æ£€å½•', 'èµ·è·‘', 'è®¡æ—¶', 'æˆç»©ç¡®è®¤']
  },

  // ç”³è¯‰ç¨‹åº
  APPEALS: {
    rules: '640-647',
    description: 'æŠ—è®®ä¸ç”³è¯‰å¤„ç†æµç¨‹',
    levels: ['ç°åœºç”³è¯‰', 'æŠ€æœ¯ç”³è¯‰', 'ä»²è£å§”å‘˜ä¼š']
  }
};
```

#### 2. ç§¯åˆ†å±•ç¤ºè¦æ±‚
```javascript
const DISPLAY_REQUIREMENTS = {
  // ç§¯åˆ†æ’è¡Œæ¦œå…¬ç¤º
  PUBLIC_RANKING: {
    updateFrequency: '14å¤©å‘¨æœŸ',
    includeFields: ['æ’å', 'å§“å', 'å›½å®¶', 'ç§¯åˆ†', 'ç½šåˆ†å€¼', 'æœ€ç»ˆç§¯åˆ†'],
    format: 'å‚ç…§å›½é™…é›ªè”å®˜ç½‘é£æ ¼',
    languages: ['ä¸­æ–‡', 'è‹±æ–‡']
  },

  // ç½šåˆ†å€¼å±•ç¤º
  PENALTY_DISPLAY: {
    showInRanking: true,
    showCalculationDetails: true,
    transparency: 'å®Œå…¨å…¬å¼€è®¡ç®—è¿‡ç¨‹',
    formula: 'P = (A + B - C) Ã· 10'
  },

  // ç‰¹æ®Šæ ‡è®°è¯´æ˜
  SPECIAL_MARKERS: {
    '+': 'å•ä¸€æˆç»©ï¼Œå¢åŠ 20%',
    '>': 'æ— æˆç»©ï¼Œåœ¨BLåŸºç¡€ä¸Šå¢åŠ 50%',
    '#': 'ä¼¤ç—…ä¿æŠ¤ï¼Œåœ¨BLåŸºç¡€ä¸Šå¢åŠ 10%',
    'C': 'ç§¯åˆ†ç¡®è®¤ï¼Œé€€å½¹é€‰æ‰‹ä¿ç•™4ä¸ªèµ›å­£'
  }
};
```

### ğŸ” æ•°æ®è´¨é‡æ§åˆ¶

#### 1. æˆç»©éªŒè¯è§„åˆ™
```javascript
class DataValidation {
  /**
   * éªŒè¯æ¯”èµ›æˆç»©åˆç†æ€§
   * @param {Object} result æ¯”èµ›æˆç»©
   * @param {Object} competition æ¯”èµ›ä¿¡æ¯
   * @returns {Object} éªŒè¯ç»“æœ
   */
  validateRaceResult(result, competition) {
    const validation = {
      isValid: true,
      errors: [],
      warnings: []
    };

    // æ—¶é—´åˆç†æ€§æ£€æŸ¥
    if (result.time <= 0) {
      validation.errors.push('æ¯”èµ›æ—¶é—´å¿…é¡»å¤§äº0');
      validation.isValid = false;
    }

    // ä¸è·èƒœè€…æ—¶é—´å·®å¼‚æ£€æŸ¥
    const timeDifference = (result.time - competition.winnerTime) / competition.winnerTime;
    if (timeDifference > 0.5) { // è¶…è¿‡è·èƒœè€…50%çš„æ—¶é—´
      validation.warnings.push('æˆç»©ä¸è·èƒœè€…å·®è·è¾ƒå¤§ï¼Œè¯·ç¡®è®¤');
    }

    // FISç§¯åˆ†åˆç†æ€§æ£€æŸ¥
    if (result.fisPoints < 0 || result.fisPoints > 999) {
      validation.errors.push('FISç§¯åˆ†è¶…å‡ºæœ‰æ•ˆèŒƒå›´(0-999)');
      validation.isValid = false;
    }

    return validation;
  }

  /**
   * éªŒè¯ç§¯åˆ†è®¡ç®—å‡†ç¡®æ€§
   * @param {Object} calculation ç§¯åˆ†è®¡ç®—ç»“æœ
   * @returns {boolean} æ˜¯å¦å‡†ç¡®
   */
  validatePointsCalculation(calculation) {
    const recalculated = this.fisCalculator.calculateRacePoints(
      calculation.winnerTime,
      calculation.competitorTime,
      calculation.discipline
    );

    const difference = Math.abs(calculation.racePoints - recalculated);
    return difference < 0.01; // å…è®¸0.01çš„èˆå…¥è¯¯å·®
  }
}
```

### ğŸ“ˆ ç»Ÿè®¡åˆ†æåŠŸèƒ½

#### 1. è¶‹åŠ¿åˆ†æ
```javascript
class StatisticsAnalyzer {
  /**
   * åˆ†æè¿åŠ¨å‘˜ç§¯åˆ†è¶‹åŠ¿
   * @param {string} athleteId è¿åŠ¨å‘˜ID
   * @param {string} discipline é¡¹ç›®
   * @param {number} months åˆ†ææœˆæ•°
   * @returns {Object} è¶‹åŠ¿åˆ†æç»“æœ
   */
  analyzePointsTrend(athleteId, discipline, months = 12) {
    const history = this.getPointsHistory(athleteId, discipline, months);

    return {
      trend: this.calculateTrend(history),
      bestResult: Math.min(...history.map(h => h.points)),
      averageImprovement: this.calculateImprovement(history),
      consistency: this.calculateConsistency(history),
      prediction: this.predictNextPoints(history)
    };
  }

  /**
   * æ¯”èµ›è´¨é‡åˆ†æ
   * @param {string} competitionId æ¯”èµ›ID
   * @returns {Object} è´¨é‡åˆ†æç»“æœ
   */
  analyzeCompetitionQuality(competitionId) {
    const participants = this.getParticipants(competitionId);
    const results = this.getResults(competitionId);

    return {
      participantLevel: this.calculateParticipantLevel(participants),
      competitiveness: this.calculateCompetitiveness(results),
      penalty: this.calculatePenalty(participants, results),
      reliability: this.assessReliability(results)
    };
  }
}
```

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **Webç«¯**: React/Next.js + TypeScript
- **å°ç¨‹åº**: å¾®ä¿¡å°ç¨‹åºåŸç”Ÿå¼€å‘
- **UIç»„ä»¶**: Ant Design / Material-UI
- **çŠ¶æ€ç®¡ç†**: Redux Toolkit / Zustand

### åç«¯æŠ€æœ¯æ ˆ
- **APIæœåŠ¡**: Node.js + Express/Fastify
- **æ•°æ®åº“**: PostgreSQL + Redis
- **ORM**: Prisma / TypeORM
- **æ–‡ä»¶å­˜å‚¨**: é˜¿é‡Œäº‘OSS/è…¾è®¯äº‘COS
- **æ¶ˆæ¯é˜Ÿåˆ—**: Redis/Bull

### æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„
```sql
-- è¿åŠ¨å‘˜è¡¨
athletes (id, name, country, fis_code, birth_date, gender)

-- æ¯”èµ›è¡¨
competitions (id, name, location, date, discipline, status)

-- æˆç»©è¡¨
results (id, athlete_id, competition_id, time, rank, points)

-- ç§¯åˆ†è¡¨
points (id, athlete_id, discipline, points, update_date, season)

-- æŠ¥åè¡¨
registrations (id, athlete_id, competition_id, status, payment_status)

-- è§„åˆ™è¡¨
rules (id, category, content_cn, content_en, version, effective_date)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- PostgreSQL 14+
- Redis 6+

### å®‰è£…ä¾èµ–
```bash
# å…‹éš†é¡¹ç›®
git clone https://gitee.com/guangyikeji/ski.git
cd ski

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
```

### å¼€å‘å‘½ä»¤
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºé¡¹ç›®
npm run build

# è¿è¡Œæµ‹è¯•
npm test

# ç±»å‹æ£€æŸ¥
npm run typecheck

# ä»£ç æ£€æŸ¥
npm run lint
```

## ğŸŒ éƒ¨ç½²æ–¹æ¡ˆ

### ğŸ¯ æ¨èéƒ¨ç½²æ–¹æ¡ˆ

#### 1. Vercel (æœ€ç®€å•)
```bash
# ä¸€é”®éƒ¨ç½²
npx vercel --prod
```
- âœ… é›¶é…ç½®è‡ªåŠ¨éƒ¨ç½²
- âœ… å…è´¹SSLå’ŒCDN
- âœ… æ”¯æŒä»Giteeè‡ªåŠ¨éƒ¨ç½²

#### 2. äº‘æœåŠ¡å™¨ ECS
```bash
# ä¸€é”®éƒ¨ç½²è„šæœ¬
chmod +x deploy.sh
./deploy.sh
```
- âœ… PM2è¿›ç¨‹ç®¡ç†
- âœ… Nginxåå‘ä»£ç†
- âœ… SSLè¯ä¹¦æ”¯æŒ

#### 3. Docker å®¹å™¨åŒ–
```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d
```
- âœ… ç¯å¢ƒä¸€è‡´æ€§
- âœ… æ˜“äºæ‰©å±•ç»´æŠ¤

### éƒ¨ç½²æˆæœ¬é¢„ä¼°
| æ–¹æ¡ˆ | æœˆè´¹ç”¨ | é€‚ç”¨åœºæ™¯ |
|------|--------|----------|
| Vercel | å…è´¹ | ä¸ªäººé¡¹ç›®ã€æ¼”ç¤º |
| é˜¿é‡Œäº‘ECS 1æ ¸2G | Â¥50-80 | å°å‹é¡¹ç›® |
| é˜¿é‡Œäº‘ECS 2æ ¸4G | Â¥100-150 | ä¸­å‹é¡¹ç›® |

## ğŸ“ é¡¹ç›®æ–‡ä»¶ç»“æ„

```
ski/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ components/         # Reactç»„ä»¶
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ services/          # APIæœåŠ¡
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ types/             # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ docs/                  # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # Dockerç¼–æ’
â”œâ”€â”€ Dockerfile            # Dockeré•œåƒ
â”œâ”€â”€ nginx.conf            # Nginxé…ç½®
â”œâ”€â”€ deploy.sh             # éƒ¨ç½²è„šæœ¬
â””â”€â”€ ecosystem.config.js   # PM2é…ç½®
```

## ğŸ“Š é¡¹ç›®èµ„æº

### ç°æœ‰æ–‡æ¡£
- `CHN6377.O22.xml`: FISæ ‡å‡†æ¯”èµ›æ•°æ®æ ·æœ¬
- `fis_points_rules_02-09-2024.pdf`: FISç§¯åˆ†è§„åˆ™æ–‡æ¡£
- `icr_21-12-2024.pdf`: å›½é™…ç«èµ›è§„åˆ™
- `å›½é™…é›ªè”ç«èµ›è§„åˆ™2021å¹´7æœˆç‰ˆï¼ˆä¸­è‹±ï¼‰.docx`: ä¸­è‹±æ–‡è§„åˆ™å¯¹ç…§
- `æ»‘é›ªç§¯åˆ†é—®é¢˜æ±‡æ€».docx`: ç§¯åˆ†è®¡ç®—é—®é¢˜æ€»ç»“

## ğŸ—“ï¸ å¼€å‘è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¶æ„ (4å‘¨)
- [x] é¡¹ç›®åˆå§‹åŒ–å’ŒåŸºç¡€æ¶æ„æ­å»º
- [x] æ•°æ®åº“è®¾è®¡å’ŒåŸºç¡€è¡¨ç»“æ„
- [ ] ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†ç³»ç»Ÿ
- [ ] XMLæ•°æ®è§£ææ¨¡å—å¼€å‘

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (6å‘¨)
- [ ] FISç§¯åˆ†è®¡ç®—å¼•æ“å®ç°
- [ ] æˆç»©ç®¡ç†ç³»ç»Ÿå¼€å‘
- [ ] åŸºç¡€æŠ¥è¡¨å’Œç»Ÿè®¡åŠŸèƒ½
- [ ] Webç®¡ç†åå°ç•Œé¢

### Phase 3: æŠ¥åç³»ç»Ÿ (4å‘¨)
- [ ] åœ¨çº¿æŠ¥ååŠŸèƒ½å¼€å‘
- [ ] èµ„æ ¼å®¡æŸ¥å’ŒéªŒè¯æ¨¡å—
- [ ] æ”¯ä»˜ç³»ç»Ÿé›†æˆ
- [ ] æŠ¥åç®¡ç†åå°

### Phase 4: ç§»åŠ¨ç«¯ (4å‘¨)
- [ ] å¾®ä¿¡å°ç¨‹åºå¼€å‘
- [ ] å“åº”å¼è®¾è®¡ä¼˜åŒ–
- [ ] ç¦»çº¿åŠŸèƒ½æ”¯æŒ
- [ ] æ¶ˆæ¯æ¨é€æœåŠ¡

### Phase 5: é«˜çº§åŠŸèƒ½ (4å‘¨)
- [ ] æ•°æ®åˆ†æå’Œå¯è§†åŒ–
- [ ] æ™ºèƒ½æ¨èç®—æ³•
- [ ] å¤šè¯­è¨€å›½é™…åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®åˆ°ä¸ªäººä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ ESLint + Prettier è¿›è¡Œä»£ç æ ¼å¼åŒ–
- éµå¾ª TypeScript ä¸¥æ ¼æ¨¡å¼
- ç»„ä»¶å’Œå‡½æ•°éœ€è¦æ·»åŠ  JSDoc æ³¨é‡Š
- æäº¤ä¿¡æ¯éµå¾ª Conventional Commits è§„èŒƒ

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®ç»´æŠ¤è€…**: guangyikeji
- **é‚®ç®±**: 16161327+guangyikeji@user.noreply.gitee.com
- **Gitee**: https://gitee.com/guangyikeji/ski

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- å›½é™…é›ªè”(FIS) æä¾›çš„æŠ€æœ¯è§„åˆ™å’Œç§¯åˆ†æ ‡å‡†
- æ»‘é›ªè¿åŠ¨ç¤¾åŒºçš„æ”¯æŒå’Œåé¦ˆ
- å¼€æºç¤¾åŒºæä¾›çš„ä¼˜ç§€å·¥å…·å’Œæ¡†æ¶

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼**