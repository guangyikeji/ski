# é«˜å±±æ»‘é›ªç«èµ›ç®¡ç†ç³»ç»Ÿ

## é¡¹ç›®æ¦‚è¿°
åŸºäºã€Šä¸­å›½é«˜å±±æ»‘é›ªèµ›äº‹ç§¯åˆ†è§„åˆ™v4.docxã€‹çš„ä¸­å›½é«˜å±±æ»‘é›ªç«èµ›æ•°æ®ç®¡ç†å’Œç§¯åˆ†è®¡ç®—ç³»ç»Ÿï¼Œæ”¯æŒWebç«¯å’Œå¾®ä¿¡å°ç¨‹åºå¤šç«¯è®¿é—®ã€‚å‚è€ƒå›½é™…é›ªè”(FIS)ç§¯åˆ†è®¡ç®—æ–¹æ³•ï¼Œå»ºç«‹é€‚åˆä¸­å›½æ»‘é›ªè¿åŠ¨å‘å±•çš„ç§¯åˆ†ä½“ç³»ã€‚

## æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

### 1. ç«èµ›æ•°æ®ç®¡ç†
- **æ•°æ®å¯¼å…¥**: æ”¯æŒFISæ ‡å‡†XMLæ ¼å¼ç«èµ›æ•°æ®å¯¼å…¥
- **æ•°æ®è§£æ**: è‡ªåŠ¨è§£ææ¯”èµ›ç»“æœã€è¿åŠ¨å‘˜ä¿¡æ¯ã€èµ›é“æ¡ä»¶ç­‰
- **æ•°æ®å­˜å‚¨**: ç»“æ„åŒ–å­˜å‚¨å†å²æ¯”èµ›æ•°æ®
- **æ•°æ®æŸ¥è¯¢**: æ”¯æŒå¤šç»´åº¦æ•°æ®æ£€ç´¢å’Œç­›é€‰

### 2. ç§¯åˆ†è®¡ç®—ç³»ç»Ÿ
- **ä¸­å›½ç§¯åˆ†è§„åˆ™**: åŸºäºã€Šä¸­å›½é«˜å±±æ»‘é›ªèµ›äº‹ç§¯åˆ†è§„åˆ™v4.0ã€‹è‡ªåŠ¨è®¡ç®—
- **å®æ—¶è®¡ç®—**: æ¯”èµ›ç»“æŸåè‡ªåŠ¨æ›´æ–°è¿åŠ¨å‘˜ç§¯åˆ†
- **ç§¯åˆ†å†å²**: è¿½è¸ªè¿åŠ¨å‘˜ç§¯åˆ†å˜åŒ–è¶‹åŠ¿
- **æ’åç³»ç»Ÿ**: åŸºäºç§¯åˆ†çš„å®æ—¶æ’åæ›´æ–°
- **èµ›äº‹åˆ†çº§**: æ”¯æŒAçº§(1.0)ã€Bçº§(0.6)ã€Cçº§(0.3)èµ›äº‹ç³»æ•°

### 3. è§„åˆ™ç®¡ç†
- **è§„åˆ™åº“**: æ•°å­—åŒ–å­˜å‚¨ç«èµ›è§„åˆ™æ–‡æ¡£
- **è§„åˆ™æŸ¥è¯¢**: æ”¯æŒå…³é”®è¯æœç´¢å’Œåˆ†ç±»æŸ¥è¯¢
- **è§„åˆ™æ›´æ–°**: åŠæ—¶æ›´æ–°æœ€æ–°ç‰ˆæœ¬è§„åˆ™
- **ä¸­è‹±å¯¹ç…§**: æ”¯æŒä¸­è‹±æ–‡è§„åˆ™å¯¹ç…§æŸ¥çœ‹

### 4. æˆç»©ç®¡ç†
- **æˆç»©å½•å…¥**: æ”¯æŒæ‰‹åŠ¨å’Œæ‰¹é‡æˆç»©å½•å…¥
- **æˆç»©ç»Ÿè®¡**: è¿åŠ¨å‘˜ä¸ªäººå’Œå›¢ä½“æˆç»©ç»Ÿè®¡
- **æˆç»©æ’å**: å¤šé¡¹ç›®ã€å¤šçº§åˆ«æˆç»©æ’å
- **æˆç»©éªŒè¯**: æˆç»©æ•°æ®æ ¡éªŒå’Œå¼‚å¸¸æ£€æµ‹

### 5. æŠ¥ååŠŸèƒ½ â­ æ–°å¢
- **åœ¨çº¿æŠ¥å**: è¿åŠ¨å‘˜/æ•™ç»ƒå‘˜åœ¨çº¿æŠ¥åå‚èµ›
- **èµ„æ ¼å®¡æŸ¥**: è‡ªåŠ¨éªŒè¯å‚èµ›èµ„æ ¼å’Œç§¯åˆ†è¦æ±‚
- **æŠ¥åç®¡ç†**: æŠ¥åä¿¡æ¯å®¡æ ¸ã€ä¿®æ”¹ã€å–æ¶ˆ
- **è´¹ç”¨ç®¡ç†**: æŠ¥åè´¹ç”¨è®¡ç®—å’Œæ”¯ä»˜é›†æˆ
- **åå•å¯¼å‡º**: ç”Ÿæˆå‚èµ›åå•å’Œèµ·è·‘é¡ºåº

### 6. æŠ¥è¡¨ç”Ÿæˆ
- **æ¯”èµ›æŠ¥å‘Š**: è‡ªåŠ¨ç”Ÿæˆæ¯”èµ›ç»“æœæŠ¥å‘Š
- **ç§¯åˆ†æŠ¥è¡¨**: è¿åŠ¨å‘˜ç§¯åˆ†å˜åŒ–æŠ¥è¡¨
- **ç»Ÿè®¡åˆ†æ**: æ¯”èµ›æ•°æ®ç»Ÿè®¡åˆ†æå›¾è¡¨
- **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒPDFã€Excelç­‰æ ¼å¼å¯¼å‡º

## ğŸ† ä¸­å›½é«˜å±±æ»‘é›ªèµ›äº‹ç§¯åˆ†è§„åˆ™è¯¦è§£ â­ æ ¸å¿ƒç³»ç»Ÿ (å®˜æ–¹v4.0ç‰ˆæœ¬)

**é‡è¦å£°æ˜**: ä»¥ä¸‹è§„åˆ™åŸºäºã€Šä¸­å›½é«˜å±±æ»‘é›ªèµ›äº‹ç§¯åˆ†è§„åˆ™v4.docxã€‹å®˜æ–¹æ–‡æ¡£ï¼Œç³»ç»Ÿå¼€å‘å¿…é¡»ä¸¥æ ¼éµå¾ªæ­¤è§„åˆ™ä½“ç³»

**ğŸ“‹ v4.0æ ¸å¿ƒç‰¹ç‚¹**:
- å®Œæ•´çš„èµ›äº‹åˆ†çº§ç³»æ•°ä½“ç³»ï¼ˆAçº§1.0ã€Bçº§0.6ã€Cçº§0.3ï¼‰
- ç®€åŒ–è€Œç²¾ç¡®çš„ç§¯åˆ†è®¡ç®—å…¬å¼
- æ‰©å±•çš„Uç³»åˆ—é’å°‘å¹´ä½“ç³»ï¼ˆU10-U21ï¼‰
- å®Œå–„çš„ä¼¤ç—…ä¿æŠ¤å’Œç”³è¯‰æœºåˆ¶
- æ˜ç¡®çš„æ•°æ®ä¼ è¾“å’ŒæŠ€æœ¯ä»£è¡¨èŒè´£ä½“ç³»

### 1. ä¸­å›½ç§¯åˆ†ç³»ç»ŸåŸºæœ¬åŸç†
- **æ ‡å‡†åŒ–è®¡ç®—**: ä½¿ç”¨ç»Ÿä¸€çš„é«˜å±±æ»‘é›ªå…¬å¼ç¡®ä¿ä¸­å›½èµ›äº‹ç§¯åˆ†çš„å…¬å¹³æ€§
- **åŠ¨æ€æ›´æ–°**: é€šè¿‡åŸºç¡€ç§¯åˆ†è¡¨(BL)å’Œå¸¸è§„ç§¯åˆ†è¡¨(NL)å®ç°ç§¯åˆ†çš„åŠ¨æ€æ›´æ–°
- **åˆ¤ç½šåˆ†æœºåˆ¶**: åŸºäºå‚èµ›é€‰æ‰‹ä¸­æœ€å¥½5åçš„ä¸­å›½ç§¯åˆ†è®¡ç®—æ¯”èµ›éš¾åº¦
- **æœ‰æ•ˆæœŸç®¡ç†**: å½“å‰èµ›å­£å†…çš„æˆç»©æœ‰æ•ˆï¼Œä¿æŒç§¯åˆ†æ—¶æ•ˆæ€§
- **èµ›äº‹åˆ†çº§**: Açº§(1.0)ã€Bçº§(0.6)ã€Cçº§(0.3)ä¸åŒç³»æ•°ä½“ç³»

### 2. æ ¸å¿ƒè®¡ç®—å…¬å¼

#### 2.1 åŸºç¡€æ¯”èµ›ç§¯åˆ†è®¡ç®—å…¬å¼ (v4.0æ ‡å‡†)
```javascript
// é«˜å±±æ»‘é›ªæ ‡å‡†å…¬å¼
P = F Ã— (Tx/To - 1)

// å‚æ•°è¯´æ˜:
// P = åŸºç¡€æ¯”èµ›ç§¯åˆ† (Base Race Points)
// To = è·èƒœè€…æ—¶é—´ (Winner's Time in seconds)
// Tx = è¢«æ’åé€‰æ‰‹æ—¶é—´ (Ranked Competitor's Time in seconds)
// F = é¡¹ç›®ç³»æ•° (Discipline Factor)
```

#### 2.2 æœ€ç»ˆç§¯åˆ†è®¡ç®—å…¬å¼ (v4.0æ ¸å¿ƒ)
```javascript
// å®Œæ•´è®¡ç®—æµç¨‹ï¼š
// 1. åŸºç¡€æ¯”èµ›ç§¯åˆ†ï¼šP = F Ã— (Tx/To - 1)
// 2. åŠ å…¥åˆ¤ç½šåˆ†ï¼šç§¯åˆ† = P + åˆ¤ç½šåˆ†
// 3. åº”ç”¨èµ›äº‹ç³»æ•°ï¼šæœ€ç»ˆç§¯åˆ† = (P + åˆ¤ç½šåˆ†) Ã— èµ›äº‹ç³»æ•°

// æœ€ç»ˆç§¯åˆ†å…¬å¼ï¼š
æœ€ç»ˆç§¯åˆ† = (åŸºç¡€æ¯”èµ›ç§¯åˆ† + åˆ¤ç½šåˆ†) Ã— èµ›äº‹ç³»æ•°

// èµ›äº‹ç³»æ•°ï¼šAçº§1.0ï¼ŒBçº§0.6ï¼ŒCçº§0.3
```

#### 2.2 å„é¡¹ç›®Fç³»æ•°
```javascript
const DISCIPLINE_FACTORS = {
  DH: 1250,    // é€Ÿé™ (Downhill)
  SL: 730,     // å›è½¬ (Slalom)
  GS: 1010,    // å¤§å›è½¬ (Giant Slalom)
  SG: 1190,    // è¶…çº§å¤§å›è½¬ (Super Giant Slalom)
  AC: 1360     // å…¨èƒ½ (Alpine Combined)
};
```

#### 2.3 åˆ¤ç½šåˆ†(Penalty)è®¡ç®—å…¬å¼ (v4.0æ ‡å‡†)
```javascript
// åˆ¤ç½šåˆ† = (Sum A + Sum B - Sum C) Ã· 10
Penalty = (sumA + sumB - sumC) / 10;

// å‚æ•°å®šä¹‰ï¼š
// Sum Aï¼šæ¯”èµ›å‰10åä¸­æœ€å¥½5åé€‰æ‰‹çš„ç§¯åˆ†æ€»å’Œ
// Sum Bï¼šæ‰€æœ‰å‚èµ›é€‰æ‰‹ä¸­æœ€å¥½5åçš„ç§¯åˆ†æ€»å’Œ  
// Sum Cï¼šå¯¹åº”Sum Bçš„5åé€‰æ‰‹åœ¨æœ¬åœºæ¯”èµ›çš„åŸºç¡€æ¯”èµ›ç§¯åˆ†æ€»å’Œï¼ˆP = F Ã— (Tx/To - 1)ï¼‰

// æ•°æ®é‡‡é›†è§„åˆ™ï¼š
// 1. ä¼˜å…ˆä½¿ç”¨è¿åŠ¨å‘˜æœ€æ–°æœ‰æ•ˆçš„ä¸­å›½é«˜å±±æ»‘é›ªç§¯åˆ†
// 2. è‹¥æ— å›½å†…ç§¯åˆ†ï¼Œä½¿ç”¨FISå›½é™…ç§¯åˆ†
// 3. è‹¥å‡æ— ç§¯åˆ†ï¼Œä½¿ç”¨å„é¡¹ç›®æœ€å¤§ç§¯åˆ†å€¼
```

### 3. ä¸­å›½é«˜å±±æ»‘é›ªç§¯åˆ†æ›´æ–°æœºåˆ¶

#### 3.1 åŸºç¡€ç§¯åˆ†è¡¨(BL) (v4.0æ ‡å‡†)
- **å‘å¸ƒæ—¶é—´**: æ¯å¹´6æœˆä¸­æ—¬
- **è®¡ç®—æ–¹å¼**:
  - **2æ¬¡åŠä»¥ä¸Šæˆç»©**: BLç§¯åˆ† = ï¼ˆæœ€å¥½æˆç»© + æ¬¡å¥½æˆç»©ï¼‰Ã· 2
  - **å•ä¸€æˆç»©**: BLç§¯åˆ† = è¯¥æˆç»© Ã— 1.20ï¼ˆæ ‡è®°â€œ+â€ï¼‰
  - **æ— æˆç»©**: BLç§¯åˆ† = å‰ä¸€å¹´BLç§¯åˆ† Ã— 1.50ï¼ˆæ ‡è®°â€œ>â€ï¼‰
  - **æ–°æ³¨å†Œè¿åŠ¨å‘˜**: å‚åŠ é¦–åœºæ¯”èµ›åï¼Œæ ¹æ®å®é™…è¡¨ç°ç¡®å®šBLç§¯åˆ†ï¼š
    - é¦–æ¬¡æ¯”èµ›æˆç»© Ã— 1.30ï¼ˆæ ‡è®°â€œNâ€ï¼‰
    - è‹¥é¦–æ¬¡æ¯”èµ›æœªå®Œæˆï¼Œç»™äºˆè¯¥é¡¹ç›®70%åˆ†ä½æ•°ç§¯åˆ†ï¼ˆæ ‡è®°â€œNâ€ï¼‰

#### 3.2 å¸¸è§„ç§¯åˆ†è¡¨(NL) (v4.0æ ‡å‡†)
- **é¦–æ¬¡å‘å¸ƒ**: 7æœˆ1æ—¥
- **è®¡ç®—è§„åˆ™**:
  - å–å½“å‰èµ›å­£å„å°é¡¹æœ€å¥½2æ¬¡æˆç»©çš„å¹³å‡å€¼
  - è‹¥å½“å‰NLç§¯åˆ†ä¼˜äºBLç§¯åˆ†ï¼Œåˆ™æ›´æ–°ä¸ºNLç§¯åˆ†
  - è‹¥è¿åŠ¨å‘˜æœ¬èµ›å­£æ— å‚èµ›ï¼Œä¿æŒBLç§¯åˆ†ä¸å˜
- **æ›´æ–°å‘¨æœŸ**:
  - æ¯åœºæ¯”èµ›ç»“æŸå7ä¸ªå·¥ä½œæ—¥å†…æ›´æ–°å•åœºç§¯åˆ†
  - **èµ›å­£æœŸé—´æ¯å‘¨äºŒå‘å¸ƒNLç§¯åˆ†è¡¨æ›´æ–°**
  - **éèµ›å­£æœŸé—´æ¯æœˆ15æ—¥å‘å¸ƒNLç§¯åˆ†è¡¨æ›´æ–°**
  - Açº§é‡è¦èµ›äº‹åå¯è¿›è¡Œä¸´æ—¶æ›´æ–°

#### 3.3 ç§¯åˆ†æœ‰æ•ˆæœŸ (v4.0æ–°å¢)
- **ç§¯åˆ†æœ‰æ•ˆæœŸ**: å½“å‰èµ›å­£å†…
- **è¿è§„å¤„ç†**: è¿ååå…´å¥‹å‰‚è§„åˆ™çš„è¿åŠ¨å‘˜ï¼Œå…¶æ­¤å‰æ‰€è·å¾—çš„ç§¯åˆ†å°†äºˆä»¥åˆ é™¤

#### 3.4 é¡¹ç›®æœ€å¤§ç§¯åˆ†å€¼ (v4.0æ ‡å‡†)
```javascript
const MAX_POINTS_V4 = {
  DH: 330,    // æ»‘é™ (Downhill)
  SG: 270,    // è¶…çº§å¤§å›è½¬ (Super Giant Slalom) 
  GS: 220,    // å¤§å›è½¬ (Giant Slalom)
  SL: 165,    // å›è½¬ (Slalom)
  AC: 270     // å…¨èƒ½ (Alpine Combined)
};
```

### 4. èµ›äº‹ç®¡ç†è§„åˆ™ (v4.0æ ¸å¿ƒ)

#### 4.1 èµ›äº‹åˆ†çº§ç³»æ•°ä½“ç³»
```javascript
const RACE_COEFFICIENTS = {
  A_LEVEL: 1.0,    // Açº§èµ›äº‹ï¼šå…¨å›½é”¦æ ‡èµ›ã€å†¬è¿ä¼šç­‰
  B_LEVEL: 0.6,    // Bçº§èµ›äº‹ï¼šé’å¹´å† å†›èµ›ã€çœçº§é”¦æ ‡èµ›ç­‰  
  C_LEVEL: 0.3     // Cçº§èµ›äº‹ï¼šåœ°å¸‚çº§æ¯”èµ›ç­‰
};

// Açº§èµ›äº‹ï¼ˆç³»æ•°1.0ï¼‰ï¼šç»æœ‰å…³éƒ¨é—¨ç¡®å®šçš„å…¶ä»–å…¨å›½çº§é‡è¦èµ›äº‹
// Bçº§èµ›äº‹ï¼ˆç³»æ•°0.6ï¼‰ï¼šç»æœ‰å…³éƒ¨é—¨ç¡®å®šçš„å…¶ä»–çœçº§åŠåŒºåŸŸæ€§é‡è¦èµ›äº‹ 
// Cçº§èµ›äº‹ï¼ˆç³»æ•°0.3ï¼‰ï¼šç»æœ‰å…³éƒ¨é—¨ç¡®å®šçš„å…¶ä»–åœ°å¸‚çº§èµ›äº‹
```

#### 4.2 Uç³»åˆ—èµ›äº‹è§„åˆ™ (v4.0æ‰©å±•)
```javascript
const U_SERIES_RULES = {
  // è®¡å…¥ç§¯åˆ†ä½“ç³»çš„ç»„åˆ«
  age_groups: {
    U21: { max_age: 21, points_system: 'æ­£å¼ç§¯åˆ†' },
    U18: { max_age: 18, points_system: 'æ­£å¼ç§¯åˆ†' },
    U15: { max_age: 15, points_system: 'æ­£å¼ç§¯åˆ†' },
    U12: { max_age: 12, points_system: 'å‘å±•ç§¯åˆ†' }
  },
  
  // èµ›äº‹çº§åˆ«å½’å±  
  race_levels: {
    national_championship: 'Bçº§èµ›äº‹ï¼ˆç³»æ•°0.6ï¼‰',
    provincial_series: 'Cçº§èµ›äº‹ï¼ˆç³»æ•°0.3ï¼‰',
    municipal_series: 'Cçº§èµ›äº‹ï¼ˆç³»æ•°0.3ï¼‰'
  }
};
```

#### 4.3 è¿åŠ¨å‘˜ç®¡ç†è§„åˆ™ (v4.0æ ¸å¿ƒ)
```javascript
const ATHLETE_MANAGEMENT = {
  // æ³¨å†Œè¦æ±‚
  registration: {
    min_age_for_official_points: 13,    // 13å‘¨å²å¯æ³¨å†Œæ­£å¼ç§¯åˆ†
    youth_development_points: 'under_13', // 13å²ä»¥ä¸‹å¯æ³¨å†Œé’å°‘å¹´å‘å±•ç§¯åˆ†
    required_documents: ['å‚èµ›å£°æ˜', 'æœ‰æ•ˆä¿é™©'],
    registration_number_required: true
  },
  
  // çŠ¶æ€ç®¡ç†
  status_management: {
    activation_period: 'èµ›å­£å†…ä¿æŒä¸å˜',
    deactivation_window: '6æœˆ1æ—¥-12æœˆ31æ—¥',
    points_retention_after_deactivation: '4ä¸ªèµ›å­£'
  },
  
  // æ³¨å†Œè´¹æ ‡å‡†
  fees: {
    adult_registration: 'xxxå…ƒ/èµ›å­£',
    youth_registration: 'xxxå…ƒ/èµ›å­£', 
    annual_points_certificate: 'xxxå…ƒ/é¡¹ç›®',
    group_discounts: {
      ten_plus: 0.9,    // 10äººä»¥ä¸Š9æŠ˜
      twenty_plus: 0.85, // 20äººä»¥ä¸Š8.5æŠ˜
      fifty_plus: 0.8    // 50äººä»¥ä¸Š8æŠ˜
    }
  }
};
```

### 5. ç§¯åˆ†è®¡ç®—å‘¨æœŸ (v4.0æ ‡å‡†)
```javascript
const CALCULATION_PERIODS = {
  winter_season: {
    start: 'æ¯å¹´11æœˆç¬¬äºŒä¸ªå‘¨æœ«',
    end: 'æ¬¡å¹´4æœˆ30æ—¥'
  },
  summer_season: {
    start: 'æ¯å¹´6æœˆ1æ—¥', 
    end: 'æ¯å¹´10æœˆ15æ—¥',
    venue_type: 'å®¤å†…é›ªåœºèµ›äº‹'
  }
};
```

### 6. æ•°æ®å¤„ç†è§„åˆ™ (v4.0å®Œå–„)

#### 6.1 ç‰¹æ®Šæƒ…å†µæˆç»©å¤„ç† (v4.0æ–°å¢)
```javascript
const SPECIAL_RESULTS_HANDLING = {
  DNS: {
    description: 'æœªå‡ºå‘',
    points_calculation: 'ä¸è®¡ç®—ç§¯åˆ†ï¼Œä¸å½±å“ä¸ªäººç§¯åˆ†è®°å½•',
    penalty_participation: false
  },
  
  DNF: {
    description: 'æœªå®Œæˆæ¯”èµ›',
    points_calculation: 'ä¸è®¡ç®—ç§¯åˆ†ï¼Œä¸å½±å“ä¸ªäººç§¯åˆ†è®°å½•',
    penalty_participation: false
  },
  
  DQ: {
    description: 'è¢«å–æ¶ˆèµ„æ ¼',
    points_calculation: 'ä¸è®¡ç®—ç§¯åˆ†ï¼Œæˆç»©æ ‡æ³¨ä¸ºDQ',
    penalty_participation: false,
    additional_penalty: 'å¯èƒ½é¢ä¸´é¢å¤–çºªå¾‹å¤„åˆ†'
  },
  
  // æ¶åŠ£å¤©æ°”ä¸­æ–­å¤„ç†
  weather_interruption: {
    'completed_30_plus': 'æŒ‰å·²å®Œæˆé€‰æ‰‹æˆç»©è®¡ç®—ç§¯åˆ†ï¼Œæœªå®Œæˆè€…è®°ä¸ºDNF',
    'completed_15_29': 'æ¯”èµ›æœ‰æ•ˆï¼Œä½†ç§¯åˆ†æŒ‰0.8ç³»æ•°è®¡ç®—',
    'completed_under_15': 'æ¯”èµ›æ— æ•ˆï¼Œä¸è®¡ç®—ä»»ä½•ç§¯åˆ†',
    'restart_option': 'è‹¥æ¡ä»¶å…è®¸ï¼Œå¯æ‹©æ—¥é‡æ–°ä¸¾è¡Œæ¯”èµ›'
  }
};
```

#### 6.2 å¹¶åˆ—æƒ…å†µå¤„ç† (v4.0ç²¾ç¡®åŒ–)
```javascript
const TIE_HANDLING = {
  tenth_place_tie: {
    description: 'ç¬¬10åå¹¶åˆ—',
    rule: 'æ‰€æœ‰å¹¶åˆ—é€‰æ‰‹å‡å‚ä¸Sum Aè®¡ç®—'
  },
  
  best_five_points_tie: {
    description: 'å‰5å¥½ç§¯åˆ†å¹¶åˆ—', 
    rule: 'é€‰æ‹©æ¯”èµ›ç§¯åˆ†è¾ƒé«˜è€…å‚ä¸Sum Cè®¡ç®—'
  },
  
  insufficient_participants: {
    description: 'å‚èµ›äººæ•°ä¸è¶³5äºº',
    rule: 'ä½¿ç”¨æœ€å¤§ç§¯åˆ†å€¼è¡¥è¶³è®¡ç®—'
  }
};
```

### 7. ä¼¤ç—…ä¿æŠ¤æœºåˆ¶ (v4.0å®Œå–„)

#### 7.1 ç”³è¯·æ¡ä»¶ (v4.0ä¸¥æ ¼åŒ–)
```javascript
const INJURY_PROTECTION = {
  // åŒ»ç–—è¯æ˜è¦æ±‚
  medical_requirements: {
    hospital_level: 'å¿çº§ä»¥ä¸ŠåŒ»é™¢',
    required_info: ['ä¼¤ç—…ç±»å‹', 'ä¸¥é‡ç¨‹åº¦', 'é¢„è®¡åº·å¤æ—¶é—´'],
    chronic_disease: 'éœ€æä¾›æŒç»­æ²»ç–—è¯æ˜'
  },
  
  // é€‚ç”¨ä¼¤ç—…ç±»å‹
  applicable_injuries: [
    'éª¨æŠ˜ã€éŸ§å¸¦æ’­è£‚ç­‰è¿åŠ¨ä¼¤å®³',
    'éœ€æ‰‹æœ¯æ²»ç–—çš„ä¸¥é‡ä¼¤ç—…',
    'å½±å“è®­ç»ƒå’Œæ¯”èµ›çš„æ…¢æ€§ç–¾ç—…', 
    'å› ä¼¤ç—…å¯¼è‡´è¿ç»­3ä¸ªæœˆä»¥ä¸Šæ— æ³•å‚èµ›'
  ]
};
```

#### 7.2 ç”³è¯·æµç¨‹ (v4.0è§„èŒƒåŒ–)
```javascript
const APPLICATION_PROCESS = {
  time_limits: {
    standard: 'ä¼¤ç—…å‘ç”Ÿå30å¤©å†…æå‡ºç”³è¯·',
    special_extension: 'ç‰¹æ®Šæƒ…å†µå¯ç”³è¯·å»¶æœŸï¼Œä½†ä¸è¶…è¿‡45å¤©',
    overdue_policy: 'è¶…è¿‡æœŸé™åŸåˆ™ä¸Šä¸äºˆå—ç†'
  },
  
  review_process: [
    'è¿åŠ¨å‘˜æˆ–æ‰€å±å•ä½å‘åä¼šæäº¤ä¹¦é¢ç”³è¯·',
    'æä¾›å®Œæ•´åŒ»ç–—è¯æ˜ææ–™',
    'åä¼šæŒ‡å®šåŒ»å­¦ä¸“å®¶è¿›è¡Œå®¡æ ¸',
    '15ä¸ªå·¥ä½œæ—¥å†…å‡ºå…·å®¡æ ¸ç»“æœ',
    'å®¡æ ¸é€šè¿‡åç”Ÿæ•ˆï¼Œä¸æº¯åŠæ—¢å¾€'
  ]
};
```

### 8. ç³»ç»Ÿå®ç°æ¶æ„ (v4.0å‡çº§)

#### 8.1 ä¸­å›½ç§¯åˆ†è®¡ç®—å¼•æ“ (v4.0æ ‡å‡†)
```javascript
class ChinaSkiPointsCalculator {
  // åŸºç¡€æ¯”èµ›ç§¯åˆ†è®¡ç®—
  calculateBaseRacePoints(winnerTime, competitorTime, discipline) {
    const F = DISCIPLINE_FACTORS[discipline];
    return F * (competitorTime / winnerTime - 1);
  }

  // åˆ¤ç½šåˆ†è®¡ç®—  
  calculatePenalty(top10ChinaPoints, allCompetitorsChinaPoints, top5BaseRacePoints) {
    const sumA = top10ChinaPoints.slice(0, 5).reduce((a, b) => a + b, 0);
    const sumB = allCompetitorsChinaPoints.slice(0, 5).reduce((a, b) => a + b, 0);
    const sumC = top5BaseRacePoints.reduce((a, b) => a + b, 0);
    return (sumA + sumB - sumC) / 10;
  }
  
  // æœ€ç»ˆç§¯åˆ†è®¡ç®— (v4.0æ ¸å¿ƒå…¬å¼)
  calculateFinalPoints(baseRacePoints, penalty, raceCoefficient) {
    return (baseRacePoints + penalty) * raceCoefficient;
  }
}
```

#### 8.2 æ•°æ®ä¼ è¾“è¦æ±‚ (v4.0è§„èŒƒ)
```javascript
const DATA_TRANSMISSION = {
  // è´£ä»»ä¸»ä½“
  organizer_responsibilities: [
    'è´Ÿè´£æˆç»©æ•°æ®çš„é‡‡é›†ã€æ•´ç†å’Œä¼ è¾“',
    'ç¡®ä¿æ•°æ®æ ¼å¼ç¬¦åˆåä¼šè¦æ±‚',
    'åœ¨è§„å®šæ—¶é™å†…å®Œæˆæ•°æ®ä¸Šä¼ '
  ],
  
  technical_delegate_responsibilities: [
    'å®¡æ ¸æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§',
    'ç¡®è®¤ç‰¹æ®Šæƒ…å†µæ ‡æ³¨çš„æ­£ç¡®æ€§',
    'åœ¨æ•°æ®ä¼ è¾“å‰è¿›è¡Œæœ€ç»ˆå®¡æ ¸ç­¾å­—'
  ],
  
  // ä¼ è¾“æ ‡å‡†
  transmission_standards: {
    formats: ['åä¼šæŒ‡å®šçš„XMLæ¨¡æ¿', 'Excelæ¨¡æ¿'],
    required_data: ['è¿åŠ¨å‘˜åŸºæœ¬ä¿¡æ¯', 'æˆç»©', 'æ—¶é—´', 'ç‰¹æ®Šæƒ…å†µæ ‡æ³¨'],
    time_limits: {
      a_level: 'æ¯”èµ›ç»“æŸå6å°æ—¶å†…',
      b_level: 'æ¯”èµ›ç»“æŸå12å°æ—¶å†…', 
      c_level: 'æ¯”èµ›ç»“æŸå24å°æ—¶å†…'
    }
  }
};
```

### 9. å‚èµ›åé¢åˆ†é…ä½“ç³» (v4.0æ ¸å¿ƒ)

#### 9.1 åŸºç¡€åé¢è®¡ç®— (v4.0æ–°è§„)
```javascript
const QUOTA_ALLOCATION = {
  // åé¢è®¡ç®—ä¾æ®
  calculation_basis: 'æ ¹æ®å½“å¹´åº¦é¦–æœŸBLç§¯åˆ†ä¸­å„å•ä½è¿åŠ¨å‘˜çš„æœ€ä½³å°é¡¹ç§¯åˆ†',
  
  // çœçº§å•ä½åé¢
  provincial_quotas: {
    a_level_races: {
      'top_3_provinces': 12,     // å‰3åçœä»½
      'rank_4_8_provinces': 10,  // ç¬¬4-8åçœä»½
      'rank_9_15_provinces': 8,  // ç¬¬9-15åçœä»½
      'rank_16_25_provinces': 6, // ç¬¬16-25åçœä»½
      'other_provinces': 4       // å…¶ä»–çœä»½
    },
    
    b_level_races: {
      'top_5_provinces': 10,     // å‰5åçœä»½
      'rank_6_15_provinces': 8,  // ç¬¬6-15åçœä»½
      'rank_16_30_provinces': 6, // ç¬¬16-30åçœä»½
      'other_provinces': 4       // å…¶ä»–çœä»½
    },
    
    c_level_races: 'ä¸è®¾åé¢é™åˆ¶ï¼Œæ‰€æœ‰æ³¨å†Œè¿åŠ¨å‘˜å‡å¯å‚èµ›'
  }
};
```

#### 9.2 ä¸ªäººåé¢è·å¾— (v4.0ä¼˜åŒ–)
```javascript
const INDIVIDUAL_QUOTA = {
  // è‡ªåŠ¨è·å¾—å‚èµ›æƒ
  automatic_qualification: {
    a_level_races: 'å„å°é¡¹ç§¯åˆ†æ’åå‰50åçš„è¿åŠ¨å‘˜',
    b_level_races: 'å„å°é¡¹ç§¯åˆ†æ’åå‰100åçš„è¿åŠ¨å‘˜',
    previous_season_protection: 'ä¸Šèµ›å­£å…¨å›½å‰ä¸‰åè¿åŠ¨å‘˜ä¿ç•™å‚èµ›æƒ'
  },
  
  // å‚èµ›åŸåˆ™
  participation_principles: [
    'ä¸è®¾ç½®ç§¯åˆ†é—¨æ§›é™åˆ¶ï¼Œé¼“åŠ±æ›´å¤šè¿åŠ¨å‘˜å‚ä¸ç«èµ›',
    'æ‰€æœ‰æ³¨å†Œè¿åŠ¨å‘˜å‡æœ‰æœºä¼šé€šè¿‡å›¢ä½“åé¢æˆ–ä¸ªäººæ’åè·å¾—å‚èµ›èµ„æ ¼',
    'é‡åœ¨æ¨å¹¿é¡¹ç›®å‘å±•ï¼Œæé«˜å‚ä¸é¢'
  ]
};
```

#### 9.3 ä¸»åŠåœ°åŒºåé¢ (v4.0å®Œå–„)
```javascript
const HOST_REGION_QUOTA = {
  // åŸºç¡€ä¿éšœåé¢
  basic_guaranteed: {
    a_level_races: { basic: 15, max: 20 },
    b_level_races: { basic: 12, max: 16 },
    c_level_races: 'ä¸é™åé¢'
  },
  
  // é‡ç‚¹å•ä½é¢å¤–åé¢
  additional_quotas: {
    national_training_base: 5,      // å›½å®¶é˜Ÿè®­ç»ƒåŸºåœ°
    provincial_key_units: 3,        // çœçº§é‡ç‚¹è®­ç»ƒå•ä½
    high_level_sports_colleges: 2   // é«˜æ°´å¹³è¿åŠ¨é˜Ÿé™¢æ ¡
  }
};
```

### 10. å›½é™…å‚èµ›æ”¿ç­– (v4.0å¼€æ”¾æ€§)
```javascript
const INTERNATIONAL_PARTICIPATION = {
  foreign_athletes: {
    a_level_limit: 25,    // Açº§èµ›äº‹æœ€å¤š25åå¤–ç±è¿åŠ¨å‘˜
    b_level_limit: 15,    // Bçº§èµ›äº‹æœ€å¤š15åå¤–ç±è¿åŠ¨å‘˜
    c_level_limit: 'ä¸é™åˆ¶å¤–ç±è¿åŠ¨å‘˜æ•°é‡'
  },
  
  registration_process: [
    'å¤–ç±è¿åŠ¨å‘˜é€šè¿‡å…¶æ‰€åœ¨å›½æ»‘é›ªåä¼šæäº¤ç”³è¯·',
    'æä¾›æœ‰æ•ˆFISç§¯åˆ†è¯æ˜ï¼ˆè¿‘12ä¸ªæœˆå†…æˆç»©ï¼‰',
    'æäº¤ä¿é™©è¯æ˜å’ŒåŒ»ç–—å¥åº·è¯æ˜', 
    'ç¼´çº³å‚èµ›è´¹ç”¨ï¼ˆä¸å›½å†…è¿åŠ¨å‘˜ç›¸åŒæ ‡å‡†ï¼‰å’Œå›½é™…æ‰‹ç»­è´¹50å…ƒ',
    'æŠ¥åæˆªæ­¢æ—¶é—´æ¯”å›½å†…è¿åŠ¨å‘˜æå‰7å¤©'
  ],
  
  points_handling: {
    domestic_ranking: 'å¤–ç±è¿åŠ¨å‘˜æˆç»©ä¸å‚ä¸å›½å†…ç§¯åˆ†æ’å',
    penalty_calculation: 'ä½†å…¶æˆç»©å‚ä¸åˆ¤ç½šåˆ†è®¡ç®—',
    awards: 'å¤–ç±è¿åŠ¨å‘˜è·å¥–ä¸å ç”¨å›½å†…è¿åŠ¨å‘˜å¥–é¡¹åé¢'
  }
};
```

### 11. è¿åŠ¨å‘˜ç­‰çº§ä¸é€‰æ‹” (v4.0æŒ‡å¯¼åŸåˆ™)
```javascript
const ATHLETE_RATING_SELECTION = {
  technical_rating: {
    basis: 'åŸºäºç§¯åˆ†è¡¨ç°ç¡®å®šè¿åŠ¨å‘˜æŠ€æœ¯ç­‰çº§ç”³æŠ¥èµ„æ ¼',
    standards: 'å…·ä½“æ ‡å‡†ç”±ç›¸å…³éƒ¨é—¨åˆ¶å®šå¹¶å…¬å¸ƒ'
  },
  
  national_team_selection: {
    primary_reference: 'ç§¯åˆ†æ’åä½œä¸ºå›½å®¶é˜Ÿé€‰æ‹”çš„é‡è¦å‚è€ƒä¾æ®',
    comprehensive_evaluation: 'ç»“åˆè®­ç»ƒè¡¨ç°ã€æ¯”èµ›æ€åº¦ç­‰ç»¼åˆè€ƒé‡'
  }
};
```

### 12. ç§¯åˆ†ç”³è¯‰ä¸è°ƒæ•´ (v4.0å®Œå–„æœºåˆ¶)

#### 12.1 ç”³è¯‰æœºåˆ¶ (v4.0è§„èŒƒåŒ–)
```javascript
const APPEAL_MECHANISM = {
  time_limits: {
    race_points_appeal: {
      on_site: 'æ¯”èµ›ç»“æŸå48å°æ—¶å†…æå‡ºç°åœºç”³è¯‰',
      written: 'ç§¯åˆ†å…¬å¸ƒå7ä¸ªå·¥ä½œæ—¥å†…æå‡ºä¹¦é¢ç”³è¯‰'
    },
    
    bl_nl_points_appeal: 'ç§¯åˆ†è¡¨å‘å¸ƒå10ä¸ªå·¥ä½œæ—¥å†…æå‡ºç”³è¯‰'
  },
  
  appeal_process: [
    'ç”³è¯‰é¡»æä¾›å……åˆ†è¯æ®å’Œç†ç”±',
    'ç¼´çº³ç”³è¯‰è´¹200å…ƒï¼ˆç”³è¯‰æˆåŠŸåé€€è¿˜ï¼‰',
    'åä¼šåœ¨15ä¸ªå·¥ä½œæ—¥å†…ç»™å‡ºå¤„ç†ç»“æœ',
    'å¯¹å¤„ç†ç»“æœä¸æœå¯å‘ä¸Šçº§ä½“è‚²éƒ¨é—¨ç”³è¯‰'
  ]
};
```

#### 12.2 ç§¯åˆ†è°ƒæ•´æƒ…å†µ (v4.0é€æ˜åŒ–)
```javascript
const POINTS_ADJUSTMENT = {
  adjustment_principles: [
    'å‘ç°è®¡ç®—é”™è¯¯æˆ–æ•°æ®é”™è¯¯æ—¶ï¼ŒåŠæ—¶è°ƒæ•´å¹¶å…¬å¸ƒ',
    'é‡å¤§è°ƒæ•´é¡»è¯´æ˜åŸå› å¹¶é€šçŸ¥ç›¸å…³è¿åŠ¨å‘˜'
  ],
  
  retrospective_period: {
    general_errors: 'æ¯”èµ›ç»“æŸå3ä¸ªæœˆå†…å¯è°ƒæ•´',
    serious_violations: 'å½“å‰èµ›å­£å†…å‡å¯è°ƒæ•´',
    anti_doping_violations: 'æ— æ—¶é™é™åˆ¶ï¼Œå¯è¿½æº¯è‡³è¿è§„å‘ç”Ÿæ—¶'
  },
  
  adjustment_notification: {
    individual_notification: 'ç§¯åˆ†è°ƒæ•´å48å°æ—¶å†…é€šçŸ¥ç›¸å…³è¿åŠ¨å‘˜',
    public_announcement: 'é‡å¤§è°ƒæ•´éœ€åœ¨å®˜ç½‘å…¬ç¤º7å¤©'
  }
};
```

### 13. v4.0è®¡ç®—ç¤ºä¾‹æ±‡æ€»

#### 13.1 å¤§å›è½¬æ¯”èµ›ç§¯åˆ†è®¡ç®—ç¤ºä¾‹ (v4.0æ ‡å‡†)
```javascript
// ç¤ºä¾‹1ï¼šå¤§å›è½¬æ¯”èµ›ç§¯åˆ†è®¡ç®—ï¼ˆæ— åˆ¤ç½šåˆ†æƒ…å†µï¼‰

// èµ›äº‹ä¿¡æ¯ï¼š
// é¡¹ç›®ï¼šå¤§å›è½¬ï¼ˆF = 1010ï¼‰
// èµ›äº‹çº§åˆ«ï¼šAçº§ï¼ˆç³»æ•° 1.0ï¼‰
// å† å†›ç”¨æ—¶ï¼šTo = 125.30ç§’
// æŸè¿åŠ¨å‘˜ç”¨æ—¶ï¼šTx = 128.75ç§’
// åˆ¤ç½šåˆ†ï¼š0.00åˆ†ï¼ˆå‡è®¾ä¸ºæ ‡å‡†éš¾åº¦æ¯”èµ›ï¼‰

// è®¡ç®—æ­¥éª¤ï¼š
// 1.åŸºç¡€æ¯”èµ›ç§¯åˆ†ï¼šP = 1010 Ã— (128.75/125.30 - 1) = 1010 Ã— 0.0275 = 27.76åˆ†
// 2.åŠ å…¥åˆ¤ç½šåˆ†ï¼š27.76 + 0.00 = 27.76åˆ†
// 3.æœ€ç»ˆç§¯åˆ† = 27.76 Ã— 1.0 = 27.76åˆ†

function calculateExample1() {
  const F = 1010;
  const To = 125.30;
  const Tx = 128.75;
  const penalty = 0.00;
  const raceCoefficient = 1.0;
  
  const basePoints = F * (Tx/To - 1);
  const finalPoints = (basePoints + penalty) * raceCoefficient;
  
  return {
    basePoints: 27.76,
    penalty: 0.00,
    finalPoints: 27.76
  };
}
```

#### 13.2 å›è½¬æ¯”èµ›ç§¯åˆ†è®¡ç®—ç¤ºä¾‹ (Bçº§èµ›äº‹)
```javascript
// ç¤ºä¾‹2ï¼šå›è½¬æ¯”èµ›ç§¯åˆ†è®¡ç®—ï¼ˆBçº§èµ›äº‹ï¼‰

// èµ›äº‹ä¿¡æ¯ï¼š
// é¡¹ç›®ï¼šå›è½¬ï¼ˆF = 730ï¼‰
// èµ›äº‹çº§åˆ«ï¼šBçº§ï¼ˆç³»æ•° 0.6ï¼‰
// å† å†›ç”¨æ—¶ï¼šTo = 98.45ç§’
// æŸè¿åŠ¨å‘˜ç”¨æ—¶ï¼šTx = 102.30ç§’
// åˆ¤ç½šåˆ†ï¼š-2.15åˆ†ï¼ˆæ¯”èµ›éš¾åº¦ä½äºæ ‡å‡†ï¼‰

// è®¡ç®—æ­¥éª¤ï¼š
// 1.åŸºç¡€æ¯”èµ›ç§¯åˆ†ï¼šP = 730 Ã— (102.30/98.45 - 1) = 730 Ã— 0.0391 = 28.54åˆ†
// 2.åŠ å…¥åˆ¤ç½šåˆ†ï¼š28.54 + (-2.15) = 26.39åˆ†
// 3.æœ€ç»ˆç§¯åˆ† = 26.39 Ã— 0.6 = 15.83åˆ†

function calculateExample2() {
  const F = 730;
  const To = 98.45;
  const Tx = 102.30;
  const penalty = -2.15;
  const raceCoefficient = 0.6;
  
  const basePoints = F * (Tx/To - 1);
  const finalPoints = (basePoints + penalty) * raceCoefficient;
  
  return {
    basePoints: 28.54,
    penalty: -2.15,
    intermediatePoints: 26.39,
    finalPoints: 15.83
  };
}
```

#### 13.3 åˆ¤ç½šåˆ†è®¡ç®—å®Œæ•´ç¤ºä¾‹ (v4.0æ ‡å‡†)
```javascript
// ç¤ºä¾‹3ï¼šå®Œæ•´åˆ¤ç½šåˆ†è®¡ç®—

// æ¯”èµ›æ•°æ®ï¼š
// å‰10åä¸­æœ€å¥½5åé€‰æ‰‹ç§¯åˆ†ï¼š12, 15, 18, 22, 28åˆ†
// æ‰€æœ‰å‚èµ›é€‰æ‰‹ä¸­æœ€å¥½5åç§¯åˆ†ï¼š8, 12, 15, 18, 20åˆ†
// å¯¹åº”çš„åŸºç¡€æ¯”èµ›ç§¯åˆ†ï¼š15.2, 27.8, 32.1, 38.5, 42.3åˆ†

// è®¡ç®—æ­¥éª¤ï¼š
// 1.Sum A = 12 + 15 + 18 + 22 + 28 = 95åˆ†
// 2.Sum B = 8 + 12 + 15 + 18 + 20 = 73åˆ†
// 3.Sum C = 15.2 + 27.8 + 32.1 + 38.5 + 42.3 = 155.9åˆ†
// 4.Penalty = (95 + 73 - 155.9) Ã· 10 = 1.21åˆ†

function calculatePenaltyExample() {
  const sumA = [12, 15, 18, 22, 28].reduce((a, b) => a + b);
  const sumB = [8, 12, 15, 18, 20].reduce((a, b) => a + b);
  const sumC = [15.2, 27.8, 32.1, 38.5, 42.3].reduce((a, b) => a + b);
  
  const penalty = (sumA + sumB - sumC) / 10;
  
  return {
    sumA: 95,
    sumB: 73,
    sumC: 155.9,
    penalty: 1.21
  };
}

// æŸè¿åŠ¨å‘˜æœ€ç»ˆç§¯åˆ†è®¡ç®—ï¼ˆAçº§èµ›äº‹ï¼‰ï¼š
// åŸºç¡€æ¯”èµ›ç§¯åˆ†ï¼š35.60åˆ†
// åŠ å…¥åˆ¤ç½šåˆ†ï¼š35.60 + 1.21 = 36.81åˆ†
// æœ€ç»ˆç§¯åˆ† = 36.81 Ã— 1.0 = 36.81åˆ†
```

#### 13.4 BLåŸºç¡€ç§¯åˆ†è¡¨è®¡ç®—ç¤ºä¾‹ (v4.0æ ‡å‡†)
```javascript
// ç¤ºä¾‹4ï¼šBLåŸºç¡€ç§¯åˆ†è¡¨è®¡ç®—

// è¿åŠ¨å‘˜Aåœ¨å¤§å›è½¬é¡¹ç›®ï¼š
// ä¸Šèµ›å­£æœ€å¥½2æ¬¡æˆç»©ï¼š25.30åˆ†ã€28.75åˆ†
// BLç§¯åˆ† = (25.30 + 28.75) Ã· 2 = 27.03åˆ†

// è¿åŠ¨å‘˜Båœ¨å›è½¬é¡¹ç›®ï¼š
// ä¸Šèµ›å­£åªæœ‰1æ¬¡æˆç»©ï¼š22.40åˆ†
// BLç§¯åˆ† = 22.40 Ã— 1.20 = 26.88åˆ†ï¼ˆæ ‡è®°â€œ+â€ï¼‰

// è¿åŠ¨å‘˜Cåœ¨æ»‘é™é¡¹ç›®ï¼š
// ä¸Šèµ›å­£æ— æˆç»©ï¼Œå‰BLç§¯åˆ†ï¼š45.60åˆ†
// æ–°BLç§¯åˆ† = 45.60 Ã— 1.50 = 68.40åˆ†ï¼ˆæ ‡è®°â€œ>â€ï¼‰

function calculateBLExamples() {
  return {
    athleteA: {
      previousResults: [25.30, 28.75],
      blPoints: (25.30 + 28.75) / 2,
      marker: ''
    },
    
    athleteB: {
      previousResults: [22.40],
      blPoints: 22.40 * 1.20,
      marker: '+'
    },
    
    athleteC: {
      previousResults: [],
      previousBL: 45.60,
      blPoints: 45.60 * 1.50,
      marker: '>'
    }
  };
}
```

#### 13.5 ç§¯åˆ†æ ‡è®°è¯´æ˜ (v4.0å®Œæ•´ç‰ˆ)
```javascript
const POINTS_MARKERS_V4 = {
  '+': 'ä»…æœ‰1æ¬¡æˆç»©ï¼Œå¢åŠ 20%',
  '>': 'æ— æˆç»©ï¼Œåœ¨å‰BLåŸºç¡€ä¸Šå¢åŠ 50%',
  '#': 'ä¼¤ç—…ä¿æŠ¤ï¼Œå¢åŠ 10%',
  'N': 'æ–°æ³¨å†Œè¿åŠ¨å‘˜ï¼Œé¦–æ¬¡æˆç»©å¢åŠ 30%',
  'C': 'ç¡®è®¤ç§¯åˆ†ï¼Œé€€å½¹é€‰æ‰‹4ä¸ªèµ›å­£æœ‰æ•ˆ',
  'DQO': 'è¶…é¢å‚èµ›ï¼Œæˆç»©æ— æ•ˆ'
};

// Næ ‡è®°ç§»é™¤ï¼šç¬¬äºŒæ¬¡æ­£å¼æ¯”èµ›å®Œæˆåè‡ªåŠ¨ç§»é™¤â€œNâ€æ ‡è®°
```

#### 13.6 ç§¯åˆ†èˆå…¥è§„åˆ™ (v4.0ç²¾åº¦æ ‡å‡†)
```javascript
// ä»0.0004å‘ä¸‹èˆå…¥ï¼Œä»0.0005å‘ä¸Šèˆå…¥
function roundPointsV4(points) {
  return Math.round(points * 100) / 100;
}

// ç¤ºä¾‹ï¼š
// 13.654åˆ† â†’ 13.65åˆ†
// 21.849åˆ† â†’ 21.85åˆ†  
// 45.005åˆ† â†’ 45.01åˆ†
```

### 14. v4.0ç³»ç»Ÿå¼€å‘è¦æ±‚æ€»ç»“

#### 14.1 å¿…é¡»å®ç°çš„æ ¸å¿ƒåŠŸèƒ½
```javascript
const V4_CORE_REQUIREMENTS = {
  // 1. ç§¯åˆ†è®¡ç®—å¼•æ“
  points_calculation_engine: {
    base_formula: 'P = F Ã— (Tx/To - 1)',
    final_formula: 'æœ€ç»ˆç§¯åˆ† = (åŸºç¡€ç§¯åˆ† + åˆ¤ç½šåˆ†) Ã— èµ›äº‹ç³»æ•°',
    race_coefficients: { A: 1.0, B: 0.6, C: 0.3 },
    precision: 2  // å°æ•°ç‚¹å2ä½
  },
  
  // 2. èµ›äº‹åˆ†çº§ç®¡ç†
  race_level_management: {
    automatic_coefficient_application: true,
    level_validation: true,
    coefficient_display: true
  },
  
  // 3. Uç³»åˆ—é’å°‘å¹´ä½“ç³»
  youth_series_system: {
    age_groups: ['U21', 'U18', 'U15', 'U12'],
    independent_ranking: true,
    development_points_for_u12: true
  },
  
  // 4. ä¼¤ç—…ä¿æŠ¤æœºåˆ¶
  injury_protection: {
    application_time_limit: 30, // å¤©
    review_period: 15,          // å·¥ä½œæ—¥
    protection_increase: 1.10,  // 10%å¢åŠ 
    max_duration: 18            // æœˆ
  }
};
```

#### 14.2 æ•°æ®ç»“æ„è¦æ±‚ (v4.0æ ‡å‡†)
```sql
-- v4.0æ•°æ®è¡¨è®¾è®¡è¦æ±‚
CREATE TABLE china_ski_points_v4 (
  id SERIAL PRIMARY KEY,
  athlete_id INT NOT NULL,
  discipline ENUM('DH','SL','GS','SG','AC') NOT NULL,
  race_level ENUM('A','B','C') NOT NULL,
  base_race_points DECIMAL(10,2) NOT NULL,
  penalty_points DECIMAL(10,2) DEFAULT 0.00,
  race_coefficient DECIMAL(3,1) NOT NULL,
  final_points DECIMAL(10,2) NOT NULL,
  calculation_date TIMESTAMP DEFAULT NOW(),
  marker VARCHAR(5) DEFAULT '',
  INDEX idx_athlete_discipline (athlete_id, discipline),
  INDEX idx_race_level (race_level),
  INDEX idx_final_points (final_points)
);

CREATE TABLE injury_protection_v4 (
  id SERIAL PRIMARY KEY,
  athlete_id INT NOT NULL,
  application_date DATE NOT NULL,
  medical_certificate TEXT NOT NULL,
  review_status ENUM('pending','approved','rejected') DEFAULT 'pending',
  protection_start_date DATE,
  protection_end_date DATE,
  protection_percentage DECIMAL(4,2) DEFAULT 1.10,
  created_at TIMESTAMP DEFAULT NOW()
);
```
#### 14.3 v4.0ç³»ç»Ÿé›†æˆæ¸…å•
```javascript
const V4_INTEGRATION_CHECKLIST = {
  // å¿…é¡»é›†æˆåŠŸèƒ½
  mandatory_integrations: [
    'ä¸­å›½æ»‘é›ªåä¼š/å›½å®¶ä½“è‚²æ€»å±€ç³»ç»Ÿå¯¹æ¥',
    'æ³¨å†Œè´¹ã€æŠ¥åè´¹åœ¨çº¿æ”¯ä»˜ç³»ç»Ÿ',
    'ç§¯åˆ†æ›´æ–°ã€èµ›äº‹é€šçŸ¥æ¶ˆæ¯æ¨é€',
    'Excelã€CSVã€PDFå¤šæ ¼å¼æ•°æ®å¯¼å‡º',
    'ä¼¤ç—…ä¿æŠ¤ç”³è¯·5ä¸ªå·¥ä½œæ—¥å®¡æ ¸æµç¨‹',
    'åå…´å¥‹å‰‚è¿è§„è¿åŠ¨å‘˜ç§¯åˆ†è‡ªåŠ¨åˆ é™¤æœºåˆ¶'
  ],
  
  // æ€§èƒ½è¦æ±‚
  performance_requirements: {
    response_time: '2ç§’ä»¥å†…',
    concurrent_users: 1000,
    points_update_time: '24å°æ—¶å†…',
    system_availability: '99.9%'
  },
  
  // æ•°æ®å®‰å…¨
  data_security: [
    'æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨',
    'è®¿é—®æƒé™ä¸¥æ ¼æ§åˆ¶',
    'æ‰€æœ‰æ¯”èµ›æ•°æ®è‡ªåŠ¨å¤‡ä»½ï¼Œä¿ç•™æœŸ4å¹´ä»¥ä¸Š',
    'æ“ä½œæ—¥å¿—å®Œæ•´è®°å½•'
  ]
};
```

### ğŸ“ v4.0æ›´æ–°æ€»ç»“

**æ ¸å¿ƒå˜åŒ–**:
1. âœ… **ç®€åŒ–ç§¯åˆ†å…¬å¼**: å»é™¤å¤æ‚çš„è´¨é‡ç³»æ•°å’Œäººæ•°ç³»æ•°ï¼Œé‡‡ç”¨ç®€æ´æ˜ç¡®çš„ä¸‰æ­¥è®¡ç®—
2. âœ… **æ ‡å‡†åŒ–èµ›äº‹åˆ†çº§**: æ˜ç¡®Açº§(1.0)ã€Bçº§(0.6)ã€Cçº§(0.3)ä¸‰çº§ä½“ç³»
3. âœ… **æ‰©å±•Uç³»åˆ—ä½“ç³»**: æ–°å¢U21å’ŒU12ç»„åˆ«ï¼Œç‹¬ç«‹ç§¯åˆ†æ’å
4. âœ… **å®Œå–„ä¼¤ç—…ä¿æŠ¤**: æ˜ç¡®ç”³è¯·æµç¨‹å’Œæ—¶é™è¦æ±‚
5. âœ… **è§„èŒƒæ•°æ®ä¼ è¾“**: æ˜ç¡®è´£ä»»ä¸»ä½“å’Œä¼ è¾“æ ‡å‡†
6. âœ… **å®Œå–„ç”³è¯‰æœºåˆ¶**: è¯¦ç»†è§„å®šç”³è¯‰æ—¶é™å’Œå¤„ç†æµç¨‹

**å¼€å‘ä¼˜å…ˆçº§**:
1. ğŸ”¥ **ç¬¬ä¸€ä¼˜å…ˆçº§**: ç§¯åˆ†è®¡ç®—å¼•æ“ + èµ›äº‹åˆ†çº§ç³»ç»Ÿ
2. ğŸ”¥ **ç¬¬äºŒä¼˜å…ˆçº§**: Uç³»åˆ—é’å°‘å¹´ç®¡ç† + ä¼¤ç—…ä¿æŠ¤ç³»ç»Ÿ
3. ğŸ”¥ **ç¬¬ä¸‰ä¼˜å…ˆçº§**: æ•°æ®ä¼ è¾“ä¸ç”³è¯‰ç³»ç»Ÿ + åé¢åˆ†é…ç®¡ç†

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æ¶æ„
- **Webç«¯**: React/Vue.js å“åº”å¼è®¾è®¡
- **å°ç¨‹åº**: å¾®ä¿¡å°ç¨‹åºåŸç”Ÿå¼€å‘
- **ç§»åŠ¨ç«¯**: å“åº”å¼è®¾è®¡é€‚é…æ‰‹æœºè®¿é—®

### åç«¯æ¶æ„
- **APIæœåŠ¡**: Node.js/Python FastAPI
- **æ•°æ®åº“**: PostgreSQL + Redisç¼“å­˜
- **æ–‡ä»¶å­˜å‚¨**: äº‘å­˜å‚¨æœåŠ¡(OSS/COS)
- **æ¶ˆæ¯é˜Ÿåˆ—**: Redis/RabbitMQ

### æ•°æ®å±‚è®¾è®¡
```sql
-- æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„è®¾è®¡
athletes (è¿åŠ¨å‘˜è¡¨)
competitions (æ¯”èµ›è¡¨)
results (æˆç»©è¡¨)
points (ç§¯åˆ†è¡¨)
registrations (æŠ¥åè¡¨)
rules (è§„åˆ™è¡¨)
```

## å¼€å‘é˜¶æ®µè§„åˆ’

### Phase 1: åŸºç¡€æ•°æ®ç®¡ç†
- æ•°æ®åº“è®¾è®¡å’Œæ­å»º
- XMLæ•°æ®è§£ææ¨¡å—
- åŸºç¡€CRUDæ¥å£å¼€å‘
- ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

### Phase 2: ä¸­å›½ç§¯åˆ†è®¡ç®—æ ¸å¿ƒ (v4.0æ ‡å‡†)
- ä¸­å›½ç§¯åˆ†è®¡ç®—å¼•æ“ (åŸºäºv4.0è§„åˆ™)
- èµ›äº‹åˆ†çº§ç³»æ•°ç®¡ç† (A/B/Cçº§)
- æˆç»©ç®¡ç†ç³»ç»Ÿ
- åŸºç¡€æŠ¥è¡¨åŠŸèƒ½
- Webç«¯ç®¡ç†ç•Œé¢

### Phase 3: æŠ¥åç³»ç»Ÿ (v4.0å‡çº§)
- åœ¨çº¿æŠ¥ååŠŸèƒ½ (æ”¯æŒUç³»åˆ—åˆ†ç»„)
- èµ„æ ¼å®¡æŸ¥æ¨¡å— (v4.0æ³¨å†Œè¦æ±‚)
- æ”¯ä»˜é›†æˆ (åŒ…å«æ³¨å†Œè´¹å’ŒæŠ¥åè´¹)
- æŠ¥åç®¡ç†åå°
- ä¼¤ç—…ä¿æŠ¤ç”³è¯·ç³»ç»Ÿ

### Phase 4: ç§»åŠ¨ç«¯å¼€å‘
- å¾®ä¿¡å°ç¨‹åºå¼€å‘
- ç§»åŠ¨ç«¯ä¼˜åŒ–
- ç¦»çº¿åŠŸèƒ½æ”¯æŒ
- æ¨é€é€šçŸ¥

### Phase 5: é«˜çº§åŠŸèƒ½
- æ•°æ®åˆ†æå’Œå¯è§†åŒ–
- æ™ºèƒ½æ¨èç³»ç»Ÿ
- å¤šè¯­è¨€æ”¯æŒ
- æ€§èƒ½ä¼˜åŒ–

## é¡¹ç›®æ–‡ä»¶è¯´æ˜

### ç°æœ‰èµ„æº
- `CHN6377.O22.xml`: FISæ ‡å‡†æ¯”èµ›æ•°æ®æ ·æœ¬
- `fis_points_rules_02-09-2024.pdf`: FISç§¯åˆ†è§„åˆ™æ–‡æ¡£
- `icr_21-12-2024.pdf`: å›½é™…ç«èµ›è§„åˆ™
- `å›½é™…é›ªè”ç«èµ›è§„åˆ™2021å¹´7æœˆç‰ˆï¼ˆä¸­è‹±ï¼‰.docx`: ä¸­è‹±æ–‡è§„åˆ™å¯¹ç…§
- `æ»‘é›ªç§¯åˆ†é—®é¢˜æ±‡æ€».docx`: ç§¯åˆ†è®¡ç®—é—®é¢˜æ€»ç»“

### å¼€å‘å‘½ä»¤
```bash
# æµ‹è¯•å‘½ä»¤
npm test

# æ„å»ºå‘½ä»¤
npm run build

# ç±»å‹æ£€æŸ¥
npm run typecheck

# ä»£ç è§„èŒƒæ£€æŸ¥
npm run lint
```

## Gitä»“åº“ä¿¡æ¯ ğŸ“¦

### ğŸ”— è¿œç¨‹ä»“åº“
- **Giteeä»“åº“**: https://gitee.com/guangyikeji/ski.git
- **GitHubä»“åº“**: https://github.com/guangyikeji/ski.git
- **å…‹éš†å‘½ä»¤**: `git clone https://gitee.com/guangyikeji/ski.git`
- **ä¸»åˆ†æ”¯**: main

### ğŸ‘¤ Gité…ç½®
```bash
git config --global user.name 'guangyikeji'
git config --global user.email '16161327+guangyikeji@user.noreply.gitee.com'
```

### ğŸ”‘ è®¿é—®ä»¤ç‰Œ
- **Gitee Token**: `5cb815ad06bd80f3fa523ba8498a89d8`
- **GitHub Token**: è¯·ä½¿ç”¨ç¯å¢ƒå˜é‡ `$GITHUB_TOKEN` æˆ–å®‰å…¨å­˜å‚¨
- **ç”¨é€”**: ç”¨äºæ¨é€ä»£ç åˆ°è¿œç¨‹ä»“åº“
- **ä½¿ç”¨æ–¹æ³•**: åœ¨HTTPS URLä¸­æ›¿æ¢å¯†ç éƒ¨åˆ†

### ğŸ“¤ æ¨é€å‘½ä»¤
```bash
# æ·»åŠ Giteeè¿œç¨‹ä»“åº“
git remote add gitee https://guangyikeji:5cb815ad06bd80f3fa523ba8498a89d8@gitee.com/guangyikeji/ski.git

# æ·»åŠ GitHubè¿œç¨‹ä»“åº“ (ä½¿ç”¨ç¯å¢ƒå˜é‡)
git remote add github https://guangyikeji:$GITHUB_TOKEN@github.com/guangyikeji/ski.git

# æ¨é€åˆ°Gitee
git push gitee main

# æ¨é€åˆ°GitHub
git push github main
```

### ğŸ·ï¸ åˆ†æ”¯ç®¡ç†
- **main**: ä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬
- **develop**: å¼€å‘åˆ†æ”¯ï¼ˆå¯é€‰ï¼‰
- **feature/***: åŠŸèƒ½åˆ†æ”¯ï¼ˆæŒ‰éœ€åˆ›å»ºï¼‰

### ğŸ“Š ä»“åº“çŠ¶æ€
- âœ… **Gitee**: ä»£ç å·²æˆåŠŸæ¨é€ï¼Œå¯æ­£å¸¸è®¿é—®
- âœ… **GitHub**: ä»£ç å·²æˆåŠŸæ¨é€ï¼Œå¯æ­£å¸¸è®¿é—®
- ğŸ”„ **åŒæ­¥ç­–ç•¥**: åŒä»“åº“åŒæ­¥æ›´æ–°

## äº‘æœåŠ¡å™¨éƒ¨ç½²æ–¹æ¡ˆ â˜ï¸

### ğŸ¯ è¿ç§»å¤æ‚åº¦: â­â­ (5æ˜Ÿåˆ¶ï¼Œéå¸¸ç®€å•)

#### ğŸ“Š è°ƒæ•´å·¥ä½œé‡è¯„ä¼°
- **Vercel**: 0% è°ƒæ•´ - é›¶é…ç½®éƒ¨ç½²
- **é˜¿é‡Œäº‘ECS**: 5% è°ƒæ•´ - ä»…éœ€è¿è¡Œéƒ¨ç½²è„šæœ¬
- **Dockeréƒ¨ç½²**: 10% è°ƒæ•´ - å·²æä¾›å®Œæ•´é…ç½®

### ğŸš€ æ¨èéƒ¨ç½²æ–¹æ¡ˆ

#### 1. Vercel (æœ€ç®€å•) â­â­â­â­â­
```bash
# ä¸€è¡Œå‘½ä»¤éƒ¨ç½²
npx vercel --prod
```
- âœ… é›¶é…ç½®ï¼Œè‡ªåŠ¨ä¼˜åŒ–
- âœ… å…è´¹SSLå’ŒCDN
- âœ… è‡ªåŠ¨ä»Giteeéƒ¨ç½²
- âœ… æ— éœ€æœåŠ¡å™¨ç®¡ç†

#### 2. é˜¿é‡Œäº‘/è…¾è®¯äº‘ ECS â­â­â­â­
```bash
# æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
git clone https://gitee.com/guangyikeji/ski.git
cd ski
chmod +x deploy.sh
./deploy.sh
```
- âœ… å·²æä¾›å®Œæ•´éƒ¨ç½²è„šæœ¬
- âœ… PM2è¿›ç¨‹ç®¡ç†
- âœ… Nginxåå‘ä»£ç†é…ç½®
- âœ… SSLè¯ä¹¦æ”¯æŒ

#### 3. Dockerå®¹å™¨åŒ– â­â­â­â­â­
```bash
# å•å‘½ä»¤å¯åŠ¨
docker-compose up -d
```
- âœ… ç¯å¢ƒä¸€è‡´æ€§
- âœ… æ˜“äºæ‰©å±•å’Œç»´æŠ¤
- âœ… åŒ…å«Nginxå’Œåº”ç”¨

### ğŸ“ å·²åˆ›å»ºçš„éƒ¨ç½²æ–‡ä»¶

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ Dockerfile              # Dockeré•œåƒæ„å»º
â”œâ”€â”€ docker-compose.yml      # å®¹å™¨ç¼–æ’é…ç½®
â”œâ”€â”€ nginx.conf              # Nginxåå‘ä»£ç†é…ç½®
â”œâ”€â”€ ecosystem.config.js     # PM2è¿›ç¨‹ç®¡ç†é…ç½®
â”œâ”€â”€ deploy.sh               # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ .gitignore              # å·²æ›´æ–°éƒ¨ç½²ç›¸å…³å¿½ç•¥æ–‡ä»¶
```

### âš¡ ä¸€é”®éƒ¨ç½²æµç¨‹

#### æ–¹æ¡ˆA: Vercel (æ¨èæ–°æ‰‹)
1. æ³¨å†ŒVercelè´¦å·
2. è¿æ¥Giteeä»“åº“
3. è‡ªåŠ¨éƒ¨ç½²å®Œæˆ âœ…

#### æ–¹æ¡ˆB: äº‘æœåŠ¡å™¨ECS
```bash
# 1. è´­ä¹°äº‘æœåŠ¡å™¨ (1æ ¸2Gå³å¯)
# 2. å®‰è£…Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# 3. å…‹éš†å¹¶éƒ¨ç½²
git clone https://gitee.com/guangyikeji/ski.git
cd ski
chmod +x deploy.sh
./deploy.sh
```

#### æ–¹æ¡ˆC: Dockeréƒ¨ç½²
```bash
# 1. å®‰è£…Docker
curl -fsSL https://get.docker.com | sh

# 2. ä¸€é”®å¯åŠ¨
git clone https://gitee.com/guangyikeji/ski.git
cd ski
docker-compose up -d
```

### ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®
```bash
# å¤åˆ¶å¹¶ç¼–è¾‘ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env

# ä¸»è¦é…ç½®é¡¹
NEXT_PUBLIC_SITE_URL=https://your-domain.com
NODE_ENV=production
PORT=3000
```

### ğŸ“Š éƒ¨ç½²æˆæœ¬é¢„ä¼°
| æ–¹æ¡ˆ | æœˆè´¹ç”¨ | é€‚ç”¨åœºæ™¯ |
|------|--------|----------|
| Vercel | å…è´¹ | ä¸ªäººé¡¹ç›®ã€æ¼”ç¤º |
| é˜¿é‡Œäº‘ECS 1æ ¸2G | Â¥50-80 | å°å‹é¡¹ç›® |
| é˜¿é‡Œäº‘ECS 2æ ¸4G | Â¥100-150 | ä¸­å‹é¡¹ç›® |
| Dockeré›†ç¾¤ | Â¥200+ | å¤§å‹é¡¹ç›® |

### ğŸ›¡ï¸ å®‰å…¨é…ç½®
- âœ… SSLè¯ä¹¦è‡ªåŠ¨é…ç½®
- âœ… å®‰å…¨HTTPå¤´è®¾ç½®
- âœ… ç¯å¢ƒå˜é‡ä¿æŠ¤
- âœ… æ–‡ä»¶æƒé™æ§åˆ¶
- âœ… è¿›ç¨‹è‡ªåŠ¨é‡å¯

## éƒ¨ç½²å’Œè¿ç»´
- **å®¹å™¨åŒ–**: Dockeréƒ¨ç½² (å·²é…ç½®)
- **CI/CD**: Gitee Actionsè‡ªåŠ¨åŒ–éƒ¨ç½² (å¯é€‰)
- **è¿›ç¨‹ç®¡ç†**: PM2é›†ç¾¤æ¨¡å¼
- **åå‘ä»£ç†**: Nginxè´Ÿè½½å‡è¡¡
- **ç›‘æ§**: è¿›ç¨‹çŠ¶æ€å’Œæ—¥å¿—ç›‘æ§
- **å¤‡ä»½**: æ•°æ®åº“å®šæœŸå¤‡ä»½ç­–ç•¥
- **SSL**: è‡ªåŠ¨HTTPSé‡å®šå‘

## å®‰å…¨è€ƒè™‘
- ç”¨æˆ·æƒé™ç®¡ç†
- æ•°æ®åŠ å¯†ä¼ è¾“
- æ•æ„Ÿä¿¡æ¯è„±æ•
- å®¡è®¡æ—¥å¿—è®°å½•
- **é‡è¦**: è¯·å¦¥å–„ä¿ç®¡è®¿é—®ä»¤ç‰Œï¼Œé¿å…æ³„éœ²