(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9343:function(e,a,s){Promise.resolve().then(s.bind(s,1952)),Promise.resolve().then(s.t.bind(s,8003,23)),Promise.resolve().then(s.t.bind(s,9974,23)),Promise.resolve().then(s.t.bind(s,2778,23)),Promise.resolve().then(s.bind(s,2834)),Promise.resolve().then(s.bind(s,4768)),Promise.resolve().then(s.bind(s,4362))},2834:function(e,a,s){"use strict";s.d(a,{default:function(){return h}});var t=s(7437),r=s(7648),i=s(7737),n=s(9345),c=s(3041),l=s(5135),o=s(4362),d=s(3700),m=s(2265);function h(){let{hasPermission:e,isAuthenticated:a}=(0,o.a)(),[s,h]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{h(!0)},[]),(0,t.jsx)("footer",{className:"bg-ski-navy text-white",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,t.jsxs)("div",{className:"col-span-1 md:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(i.Z,{className:"h-8 w-8 text-primary-400"}),(0,t.jsx)("span",{className:"text-xl font-bold",children:"Alpine Ski Points"})]}),(0,t.jsx)("p",{className:"text-gray-300 text-sm max-w-2xl leading-relaxed",children:"基于中国滑雪协会标准的专业竞赛管理平台，为中国高山滑雪运动提供权威的数据管理和积分计算服务， 致力于推动中国滑雪运动的数字化、标准化发展。"}),(0,t.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,t.jsx)("a",{href:"mailto:contact@alpine-ski-points.com",className:"text-gray-300 hover:text-primary-400 transition-colors",children:(0,t.jsx)(n.Z,{className:"h-5 w-5"})}),(0,t.jsx)("a",{href:"tel:+86-400-123-4567",className:"text-gray-300 hover:text-primary-400 transition-colors",children:(0,t.jsx)(c.Z,{className:"h-5 w-5"})}),(0,t.jsx)("a",{href:"https://github.com/alpine-ski-points",className:"text-gray-300 hover:text-primary-400 transition-colors",target:"_blank",rel:"noopener noreferrer",children:(0,t.jsx)(l.Z,{className:"h-5 w-5"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"积分系统"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[s&&e(d._z.POINTS_QUERY,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/points/fis",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"中国积分查询"})}):null,s&&e(d._z.POINTS_RANKING,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/points/rankings",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分排行榜"})}):null,s&&e(d._z.POINTS_CALCULATOR,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/points/calculator",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分计算器"})}):null,s&&e(d._z.POINTS_TRENDS,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/points/trends",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分变化趋势"})}):null,s&&e(d._z.RULES_POINTS,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/rules/points",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"积分规则详解"})}):null,s&&!a&&(0,t.jsx)("li",{className:"pt-2 border-t border-gray-600",children:(0,t.jsx)(r.default,{href:"/login",className:"text-sky-400 hover:text-sky-300 transition-colors text-sm",children:"登录查看更多功能 →"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"赛事管理"}),(0,t.jsxs)("ul",{className:"space-y-2 text-sm",children:[s&&e(d._z.COMPETITIONS,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/competitions",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"比赛列表"})}):null,s&&e(d._z.COMPETITIONS_SCHEDULE,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/competitions/schedule",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"赛事日程"})}):null,s&&e(d._z.REGISTRATION,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/registration",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"在线报名"})}):null,s&&e(d._z.RESULTS_IMPORT,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/results-import",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"成绩导入"})}):null,s&&e(d._z.RESULTS_ANNOUNCEMENT,d.aU.READ)?(0,t.jsx)("li",{children:(0,t.jsx)(r.default,{href:"/results-announcement",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"成绩公布"})}):null,s&&!a&&(0,t.jsx)("li",{className:"pt-2 border-t border-gray-600",children:(0,t.jsx)(r.default,{href:"/register",className:"text-sky-400 hover:text-sky-300 transition-colors text-sm",children:"注册参与赛事 →"})})]})]})]}),(0,t.jsx)("div",{className:"border-t border-gray-700 mt-12 pt-8",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,t.jsx)("div",{className:"text-sm text-gray-300 mb-4 md:mb-0",children:"\xa9 2024 Alpine Skiing China 中国高山滑雪积分管理平台. 基于中国滑雪协会标准开发."}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm",children:[(0,t.jsx)("a",{href:"#",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"隐私政策"}),(0,t.jsx)("a",{href:"#",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"使用条款"}),(0,t.jsx)("a",{href:"#",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"技术规范"}),(0,t.jsx)("a",{href:"#",className:"text-gray-300 hover:text-primary-400 transition-colors",children:"联系我们"})]})]})})]})})}},4768:function(e,a,s){"use strict";s.d(a,{default:function(){return R}});var t=s(7437),r=s(7648),i=s(9376),n=s(2265),c=s(7737),l=s(3618),o=s(9474),d=s(5805),m=s(7806),h=s(8736),x=s(875),u=s(9090),E=s(8728),N=s(7692),A=s(2369),p=s(2489),T=s(6840),f=s(4362),U=s(3700);let _=[{name:"首页",href:"/",icon:c.Z,active:!0,resource:U._z.HOME,action:U.aU.READ},{name:"积分系统",href:"/points",icon:l.Z,active:!0,resource:U._z.POINTS_QUERY,action:U.aU.READ,children:[{name:"中国积分查询",href:"/points/fis",active:!0,resource:U._z.POINTS_QUERY,action:U.aU.READ},{name:"积分计算器",href:"/points/calculator",active:!0,resource:U._z.POINTS_CALCULATOR,action:U.aU.READ},{name:"积分排行榜",href:"/points/rankings",active:!0,resource:U._z.POINTS_RANKING,action:U.aU.READ},{name:"积分变化趋势",href:"/points/trends",active:!0,resource:U._z.POINTS_TRENDS,action:U.aU.READ}]},{name:"赛事管理",href:"/competitions",icon:o.Z,active:!0,resource:U._z.COMPETITIONS,action:U.aU.READ,children:[{name:"赛事日程",href:"/competitions/schedule",active:!0,resource:U._z.COMPETITIONS_SCHEDULE,action:U.aU.READ},{name:"比赛列表",href:"/competitions",active:!0,resource:U._z.COMPETITIONS,action:U.aU.READ},{name:"成绩导入",href:"/results-import",active:!0,resource:U._z.RESULTS_IMPORT,action:U.aU.READ},{name:"成绩公布",href:"/results-announcement",active:!0,resource:U._z.RESULTS_ANNOUNCEMENT,action:U.aU.READ},{name:"数据分析",href:"/competitions/stats",active:!0,resource:U._z.STATISTICS,action:U.aU.READ}]},{name:"运动员管理",href:"/athletes",icon:d.Z,active:!0,resource:U._z.USER_MANAGEMENT,action:U.aU.READ,children:[{name:"运动员档案",href:"/athletes",active:!0,resource:U._z.USER_MANAGEMENT,action:U.aU.READ},{name:"成绩历史",href:"/athletes/history",active:!0,resource:U._z.POINTS_QUERY,action:U.aU.READ},{name:"积分排名",href:"/athletes/rankings",active:!0,resource:U._z.POINTS_RANKING,action:U.aU.READ},{name:"成绩统计",href:"/athletes/stats",active:!0,resource:U._z.STATISTICS,action:U.aU.READ}]},{name:"报名系统",href:"/registration",icon:m.Z,active:!0,resource:U._z.REGISTRATION,action:U.aU.READ,children:[{name:"在线报名",href:"/registration",active:!0,resource:U._z.REGISTRATION,action:U.aU.WRITE},{name:"报名管理",href:"/registration/manage",active:!0,resource:U._z.REGISTRATION,action:U.aU.UPDATE},{name:"资格审查",href:"/registration/verification",active:!0,resource:U._z.REGISTRATION,action:U.aU.UPDATE},{name:"费用管理",href:"/registration/fees",active:!0,resource:U._z.REGISTRATION,action:U.aU.UPDATE}]},{name:"规则文档",href:"/rules",icon:h.Z,active:!0,resource:U._z.RULES_POINTS,action:U.aU.READ,children:[{name:"中国积分规则",href:"/rules/points",active:!0,resource:U._z.RULES_POINTS,action:U.aU.READ},{name:"竞赛规则",href:"/rules/competition",active:!0,resource:U._z.RULES_POINTS,action:U.aU.READ},{name:"技术规范",href:"/rules/technical",active:!0,resource:U._z.RULES_POINTS,action:U.aU.READ},{name:"中英对照",href:"/rules/bilingual",active:!0,resource:U._z.RULES_POINTS,action:U.aU.READ}]}];function R(){let[e,a]=(0,n.useState)(!1),[s,l]=(0,n.useState)(null),[o,d]=(0,n.useState)(!1),m=(0,i.usePathname)(),h=(0,i.useRouter)(),{user:U,logout:R,isLoading:v,hasPermission:S,isAuthenticated:I}=(0,f.a)(),j=e=>{l(s===e?null:e)},y=()=>{R(),d(!1),h.push("/")},g=e=>({admin:"管理员",coach:"教练员",athlete:"运动员",user:"用户"})[e]||"用户",D=_.filter(e=>{var a;return!!("首页"===e.name||(null===(a=e.children)||void 0===a?void 0:a.some(e=>["积分排行榜","中国积分规则","竞赛规则","赛事日程"].includes(e.name)))||e.resource&&e.action&&S(e.resource,e.action))||!e.resource||!e.action||S(e.resource,e.action)}).map(e=>{var a;return{...e,children:e.children?e.children.filter(e=>!I||!e.resource||!e.action||S(e.resource,e.action)).map(e=>({...e,needsAuth:!I&&e.resource&&e.action&&!["积分排行榜","中国积分规则","竞赛规则","赛事日程"].includes(e.name)})):void 0,needsAuth:!I&&e.resource&&e.action&&"首页"!==e.name&&!(null===(a=e.children)||void 0===a?void 0:a.some(e=>["积分排行榜","中国积分规则","竞赛规则","赛事日程"].includes(e.name)))}});return(0,t.jsxs)("nav",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(r.default,{href:"/",className:"flex items-center space-x-2",children:[(0,t.jsx)(c.Z,{className:"h-8 w-8 text-ski-blue"}),(0,t.jsx)("span",{className:"text-xl font-bold text-ski-navy whitespace-nowrap",children:"Alpine Skiing China"})]})}),(0,t.jsx)("div",{className:"hidden md:flex items-center space-x-6 flex-1 justify-center ml-8 whitespace-nowrap",children:D.map(e=>(0,t.jsx)("div",{className:"relative",children:e.children?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>j(e.name),className:"flex items-center space-x-1 nav-link whitespace-nowrap ".concat((null==m?void 0:m.startsWith(e.href))||e.children&&e.children.some(e=>m===e.href)?"active":""," ").concat(!e.active||e.needsAuth?"opacity-75":""),disabled:!e.active,children:[(0,t.jsx)(e.icon,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.name}),(0,t.jsx)(x.Z,{className:"h-3 w-3"})]}),s===e.name&&(0,t.jsxs)("div",{className:"dropdown-menu",children:[e.children.map(e=>e.needsAuth?(0,t.jsx)("div",{className:"dropdown-item text-gray-400 cursor-not-allowed",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsx)("span",{className:"text-xs text-sky-500",children:"需要登录"})]})},e.name):(0,t.jsx)(r.default,{href:e.href,className:"dropdown-item ".concat(e.active?"text-gray-700 hover:text-ski-blue ".concat(m===e.href?"bg-ski-ice text-ski-blue font-medium":""):"text-gray-400 cursor-not-allowed"),onClick:()=>e.active&&l(null),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:e.name}),!e.active&&(0,t.jsx)("span",{className:"badge badge-coming-soon text-xs",children:"即将上线"})]})},e.name)),e.needsAuth&&(0,t.jsx)("div",{className:"border-t border-gray-100 mt-1 pt-1",children:(0,t.jsx)(r.default,{href:"/login",className:"dropdown-item text-sky-500 hover:text-sky-600 text-sm",onClick:()=>l(null),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.Z,{className:"h-3 w-3 mr-2"}),(0,t.jsx)("span",{children:"登录解锁功能"})]})})})]})]}):(0,t.jsxs)(r.default,{href:e.href,className:"flex items-center space-x-1 nav-link whitespace-nowrap ".concat(m===e.href||(null==m?void 0:m.startsWith(e.href+"/"))?"active":""," ").concat(e.active?"":"opacity-50 cursor-not-allowed"),children:[(0,t.jsx)(e.icon,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.name}),!e.active&&(0,t.jsx)("span",{className:"badge badge-coming-soon text-xs ml-2",children:"即将上线"})]})},e.name))}),(0,t.jsx)("div",{className:"hidden md:flex items-center space-x-4 whitespace-nowrap",children:v?(0,t.jsx)("div",{className:"animate-pulse bg-gray-200 h-8 w-20 rounded"}):U?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>d(!o),className:"flex items-center space-x-2 text-gray-700 hover:text-ski-blue px-3 py-2 rounded-md text-sm font-medium",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-ski-blue text-white rounded-full flex items-center justify-center text-sm font-semibold",children:U.username.charAt(0).toUpperCase()}),(0,t.jsx)("span",{children:U.username}),(0,t.jsx)(x.Z,{className:"h-4 w-4"})]}),o&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg border border-gray-100 py-1 z-50",children:[(0,t.jsxs)("div",{className:"px-4 py-2 border-b border-gray-100",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:U.username}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:U.email}),(0,t.jsx)("div",{className:"text-xs text-ski-blue",children:g(U.role)})]}),(0,t.jsx)(r.default,{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>d(!1),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-2"}),"个人设置"]})}),(0,t.jsx)("button",{onClick:y,className:"block w-full px-4 py-2 text-sm text-left text-red-600 hover:bg-red-50",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"退出登录"]})})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.default,{href:"/login",className:"flex items-center space-x-1 text-gray-700 hover:text-ski-blue px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"登录"})]}),(0,t.jsxs)(r.default,{href:"/register",className:"flex items-center space-x-1 bg-ski-blue text-white hover:bg-ski-blue/90 px-3 py-2 rounded-md text-sm font-medium whitespace-nowrap",children:[(0,t.jsx)(A.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"注册"})]})]})}),(0,t.jsx)("div",{className:"md:hidden flex items-center",children:(0,t.jsx)("button",{onClick:()=>a(!e),className:"text-gray-700 hover:text-ski-blue p-2",children:e?(0,t.jsx)(p.Z,{className:"h-6 w-6"}):(0,t.jsx)(T.Z,{className:"h-6 w-6"})})})]})}),e&&(0,t.jsx)("div",{className:"md:hidden bg-white border-t border-gray-100",children:(0,t.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[D.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)(r.default,{href:e.needsAuth?"/login":e.href,className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium ".concat((null==m?void 0:m.startsWith(e.href))||e.children&&e.children.some(e=>m===e.href)?"text-ski-blue bg-ski-ice":"text-gray-700 hover:text-ski-blue hover:bg-gray-50"," ").concat(!e.active||e.needsAuth?"opacity-75":""),onClick:()=>e.active&&!e.needsAuth&&a(!1),children:[(0,t.jsx)(e.icon,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:e.name}),e.needsAuth&&(0,t.jsx)("span",{className:"text-xs text-sky-500",children:"需要登录"}),!e.active&&(0,t.jsx)("span",{className:"badge badge-coming-soon text-xs",children:"即将上线"})]}),e.children&&(e.active||e.needsAuth)&&(0,t.jsx)("div",{className:"ml-6 space-y-1",children:e.children.map(e=>e.needsAuth?(0,t.jsx)("div",{className:"block px-3 py-2 rounded-md text-sm text-gray-400 cursor-not-allowed",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsx)("span",{className:"text-xs text-sky-500",children:"需要登录"})]})},e.name):(0,t.jsx)(r.default,{href:e.href,className:"block px-3 py-2 rounded-md text-sm ".concat(e.active?"text-gray-600 hover:text-ski-blue hover:bg-gray-50 ".concat(m===e.href?"text-ski-blue bg-ski-ice font-medium":""):"text-gray-400 cursor-not-allowed"),onClick:()=>e.active&&a(!1),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:e.name}),!e.active&&(0,t.jsx)("span",{className:"badge badge-coming-soon text-xs",children:"即将上线"})]})},e.name))})]},e.name)),(0,t.jsx)("div",{className:"border-t border-gray-200 pt-3 mt-3",children:U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-3 py-2 mb-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-ski-blue text-white rounded-full flex items-center justify-center text-sm font-semibold",children:U.username.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:U.username}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:g(U.role)})]})]})}),(0,t.jsxs)(r.default,{href:"/profile",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-ski-blue hover:bg-gray-50",onClick:()=>a(!1),children:[(0,t.jsx)(E.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"个人设置"})]}),(0,t.jsxs)("button",{onClick:()=>{y(),a(!1)},className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-50 w-full text-left mt-2",children:[(0,t.jsx)(N.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"退出登录"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.default,{href:"/login",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-ski-blue hover:bg-gray-50",onClick:()=>a(!1),children:[(0,t.jsx)(u.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"登录"})]}),(0,t.jsxs)(r.default,{href:"/register",className:"flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium bg-ski-blue text-white hover:bg-ski-blue/90 mt-2",onClick:()=>a(!1),children:[(0,t.jsx)(A.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"注册"})]})]})})]})})]})}},4362:function(e,a,s){"use strict";s.d(a,{AuthProvider:function(){return d},a:function(){return m}});var t=s(7437),r=s(2265),i=s(3700);let n={[i.i4.PUBLIC]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ],[i._z.NEWS]:[i.aU.READ],[i._z.CONTACT]:[i.aU.READ]},[i.i4.ATHLETE]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ],[i._z.NEWS]:[i.aU.READ],[i._z.CONTACT]:[i.aU.READ],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ],[i._z.COMPETITIONS]:[i.aU.READ],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE]},[i.i4.COACH]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ],[i._z.NEWS]:[i.aU.READ],[i._z.CONTACT]:[i.aU.READ],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ],[i._z.COMPETITIONS]:[i.aU.READ],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE]},[i.i4.ADMIN]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ,i.aU.UPDATE],[i._z.NEWS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.CONTACT]:[i.aU.READ,i.aU.UPDATE],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ,i.aU.UPDATE],[i._z.COMPETITIONS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE],[i._z.RESULTS_IMPORT]:[i.aU.READ,i.aU.WRITE],[i._z.RESULTS_ANNOUNCEMENT]:[i.aU.READ,i.aU.WRITE],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.ADMIN_DASHBOARD]:[i.aU.READ],[i._z.POINTS_CALCULATION]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE],[i._z.USER_MANAGEMENT]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.STATISTICS]:[i.aU.READ],[i._z.SYSTEM_CONFIG]:[i.aU.READ,i.aU.UPDATE]}},c=(e,a)=>{switch(a.type){case"LOGIN_SUCCESS":return{...e,user:a.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_FAILURE":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:a.payload};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:a.payload};case"CLEAR_ERROR":return{...e,error:null};default:return e}},l={user:null,isAuthenticated:!1,isLoading:!1,error:null},o=(0,r.createContext)(void 0);function d(e){let{children:a}=e,[s,d]=(0,r.useReducer)(c,l),m=async e=>{d({type:"SET_LOADING",payload:!0});try{if(await new Promise(e=>setTimeout(e,1e3)),"admin@ski.com"===e.email&&"admin123"===e.password){let a={id:"1",username:"admin",email:e.email,role:i.i4.ADMIN,status:i.J0.ACTIVE,createdAt:new Date,lastLoginAt:new Date};d({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("auth_user",JSON.stringify(a))}else if("athlete@ski.com"===e.email&&"athlete123"===e.password){let a={id:"2",username:"athlete_user",email:e.email,role:i.i4.ATHLETE,status:i.J0.ACTIVE,athleteId:"ATH001",createdAt:new Date,lastLoginAt:new Date};d({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("auth_user",JSON.stringify(a))}else if("coach@ski.com"===e.email&&"coach123"===e.password){let a={id:"3",username:"coach_user",email:e.email,role:i.i4.COACH,status:i.J0.ACTIVE,coachId:"COACH001",createdAt:new Date,lastLoginAt:new Date};d({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("auth_user",JSON.stringify(a))}else throw Error("邮箱或密码错误，请使用以下测试账号：\n管理员：admin@ski.com / admin123\n运动员：athlete@ski.com / athlete123\n教练：coach@ski.com / coach123")}catch(e){d({type:"LOGIN_FAILURE",payload:e instanceof Error?e.message:"登录失败"})}},h=async e=>{d({type:"SET_LOADING",payload:!0});try{await new Promise(e=>setTimeout(e,1500));let a={id:Date.now().toString(),username:e.username,email:e.email,role:"athlete"===e.userType?i.i4.ATHLETE:i.i4.COACH,status:i.J0.PENDING,athleteId:"athlete"===e.userType?"ATH".concat(Date.now()):void 0,coachId:"coach"===e.userType?"COACH".concat(Date.now()):void 0,createdAt:new Date};d({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("auth_user",JSON.stringify(a))}catch(e){d({type:"LOGIN_FAILURE",payload:e instanceof Error?e.message:"注册失败"})}};(0,r.useEffect)(()=>{let e=localStorage.getItem("auth_user");if(e)try{let a=JSON.parse(e);d({type:"LOGIN_SUCCESS",payload:a})}catch(e){localStorage.removeItem("auth_user")}},[]);let x={...s,login:m,register:h,logout:()=>{localStorage.removeItem("auth_user"),d({type:"LOGOUT"})},hasPermission:(e,a)=>{var t,r;return s.user?(null===(t=n[s.user.role][e])||void 0===t?void 0:t.includes(a))||!1:(null===(r=n[i.i4.PUBLIC][e])||void 0===r?void 0:r.includes(a))||!1},clearError:()=>{d({type:"CLEAR_ERROR"})}};return(0,t.jsx)(o.Provider,{value:x,children:a})}function m(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3700:function(e,a,s){"use strict";var t,r,i,n,c,l,o,d;s.d(a,{J0:function(){return r},_z:function(){return i},aU:function(){return n},i4:function(){return t}}),(c=t||(t={})).PUBLIC="public",c.ATHLETE="athlete",c.COACH="coach",c.ADMIN="admin",(l=r||(r={})).ACTIVE="active",l.INACTIVE="inactive",l.PENDING="pending",(o=i||(i={})).HOME="home",o.ABOUT="about",o.NEWS="news",o.CONTACT="contact",o.PROFILE="profile",o.MY_POINTS="my_points",o.POINTS_QUERY="points_query",o.POINTS_RANKING="points_ranking",o.POINTS_CALCULATOR="points_calculator",o.POINTS_TRENDS="points_trends",o.RULES_POINTS="rules_points",o.COMPETITIONS="competitions",o.COMPETITIONS_SCHEDULE="competitions_schedule",o.RESULTS_IMPORT="results_import",o.RESULTS_ANNOUNCEMENT="results_announcement",o.REGISTRATION="registration",o.EVENTS="events",o.ADMIN_DASHBOARD="admin_dashboard",o.POINTS_CALCULATION="points_calculation",o.USER_MANAGEMENT="user_management",o.STATISTICS="statistics",o.SYSTEM_CONFIG="system_config",(d=n||(n={})).READ="read",d.WRITE="write",d.DELETE="delete",d.UPDATE="update"},2778:function(){}},function(e){e.O(0,[635,451,542,971,117,744],function(){return e(e.s=9343)}),_N_E=e.O()}]);