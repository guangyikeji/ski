(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[144],{3761:function(e,t,a){Promise.resolve().then(a.bind(a,9864))},9763:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{color:l="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:o,children:m,...x}=a;return(0,s.createElement)("svg",{ref:i,...n,width:c,height:c,stroke:l,strokeWidth:o?24*Number(d)/Number(c):d,className:"lucide lucide-".concat(r(e)),...x},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...(Array.isArray(m)?m:[m])||[]])});return a.displayName="".concat(e),a}},4401:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},3327:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},1047:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2735:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2208:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8736:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},6211:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},3774:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7737:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},4586:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]])},8896:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},9474:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},7689:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},257:function(e,t,a){"use strict";var s,n;e.exports=(null==(s=a.g.process)?void 0:s.env)&&"object"==typeof(null==(n=a.g.process)?void 0:n.env)?a.g.process:a(4227)},4227:function(e){!function(){var t={229:function(e){var t,a,s,n=e.exports={};function r(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{a="function"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var c=[],d=!1,o=-1;function m(){d&&s&&(d=!1,s.length?c=s.concat(c):o=-1,c.length&&x())}function x(){if(!d){var e=l(m);d=!0;for(var t=c.length;t;){for(s=c,c=[];++o<t;)s&&s[o].run();o=-1,t=c.length}s=null,d=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new u(e,t)),1!==c.length||d||l(x)},u.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},a={};function s(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}},i=!0;try{t[e](r,r.exports,s),i=!1}finally{i&&delete a[e]}return r.exports}s.ab="//";var n=s(229);e.exports=n}()},9864:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return O}});var s=a(7437),n=a(2265),r=a(4007);class i{static parseCompetitionXML(e){return{raceHeader:{sector:"AL",sex:"L",level:"STARTLIST2",season:"2016",codex:"6377",nation:"CHN",discipline:"SL",category:"FIS",type:"Startlist",raceDate:{day:"08",month:"12",year:"2015",formatted:"2015年12月08日"},eventName:"2015-16 FIS SKI RACE CHINA",place:"Genting",td:{function:"Delegate",number:"810",lastname:"NAKAMURA.M",firstname:"",nation:"JPN"}},jury:{referee:{function:"Referee",lastname:"MIN",firstname:"ZHENG",nation:"CHN"},chiefRace:{function:"Chiefrace",lastname:"LI.HONGQUAN",firstname:"",nation:"CHN"}},courses:[{run:"1",name:"TROLLIUS 6d",homologation:"10376/03/12",startTime:"8:25",gates:"55",turningGates:"53",courseSetter:{lastname:"TOMIIJIRO",firstname:"",nation:"JPN"},startElev:"2026",finishElev:"1876"},{run:"2",name:"TROLLIUS 6d",homologation:"",startTime:"10:35",gates:"54",turningGates:"53",courseSetter:{lastname:"RENLIGANG",firstname:"",nation:"CHN"},startElev:"2026",finishElev:"1876"}],raceInfo:{weather:{snow:"SOFT",weather:"CLOUDY",temperatureAirStart:"-8",temperatureAirFinish:"-1"},timingBy:"Microgate",dataProcessingBy:"Microgate",appliedPenalty:"0.00",calculatedPenalty:"0.00",fValue:"720"},competitors:[{rank:1,order:1,bib:24,fisCode:"325110",lastname:"OH",firstname:"Seo-young",sex:"L",nation:"KOR",yearOfBirth:1994,status:""},{rank:2,order:2,bib:29,fisCode:"125027",lastname:"LI",firstname:"Yang",sex:"L",nation:"CHN",yearOfBirth:1989,status:""},{rank:3,order:3,bib:26,fisCode:"125036",lastname:"SUN",firstname:"Weibo",sex:"L",nation:"CHN",yearOfBirth:1993,status:""},{rank:4,order:4,bib:16,fisCode:"325131",lastname:"HAN",firstname:"Ji-Hye",sex:"L",nation:"KOR",yearOfBirth:1998,status:""},{rank:5,order:5,bib:27,fisCode:"325132",lastname:"RA",firstname:"Aron",sex:"L",nation:"KOR",yearOfBirth:1998,status:""},{rank:6,order:6,bib:25,fisCode:"125037",lastname:"MEIXIA",firstname:"Wang",sex:"L",nation:"CHN",yearOfBirth:1997,status:""},{rank:7,order:7,bib:10,fisCode:"125039",lastname:"NI",firstname:"Yueming",sex:"L",nation:"CHN",yearOfBirth:1995,status:""},{rank:8,order:8,bib:23,fisCode:"125026",lastname:"LIU",firstname:"Yang",sex:"L",nation:"CHN",yearOfBirth:1988,status:""},{rank:9,order:9,bib:19,fisCode:"307392",lastname:"ORIGUCHI",firstname:"Miho",sex:"L",nation:"JPN",yearOfBirth:1995,status:""},{rank:10,order:10,bib:28,fisCode:"125040",lastname:"ZHANG",firstname:"Yuying",sex:"L",nation:"CHN",yearOfBirth:1997,status:""},{rank:11,order:11,bib:22,fisCode:"125022",lastname:"QIN",firstname:"Xiyue",sex:"L",nation:"CHN",yearOfBirth:1988,status:""},{rank:12,order:12,bib:18,fisCode:"307817",lastname:"KIKUCHI",firstname:"Juki",sex:"L",nation:"JPN",yearOfBirth:1998,status:""},{rank:13,order:13,bib:39,fisCode:"307899",lastname:"SHIMIZU",firstname:"Ami",sex:"L",nation:"JPN",yearOfBirth:1999,status:""},{rank:14,order:14,bib:11,fisCode:"307808",lastname:"HATA",firstname:"Urara",sex:"L",nation:"JPN",yearOfBirth:1998,status:""},{rank:15,order:15,bib:17,fisCode:"307699",lastname:"ORIGUCHI",firstname:"Misa",sex:"L",nation:"JPN",yearOfBirth:1997,status:""},{rank:16,order:16,bib:3,fisCode:"325130",lastname:"HONG",firstname:"Ye-Bin",sex:"L",nation:"KOR",yearOfBirth:1998,status:""},{rank:17,order:17,bib:7,fisCode:"307684",lastname:"TAKAHASHI",firstname:"Moe",sex:"L",nation:"JPN",yearOfBirth:1997,status:""},{rank:18,order:18,bib:15,fisCode:"325111",lastname:"JO",firstname:"Eun-hwa",sex:"L",nation:"KOR",yearOfBirth:1995,status:""},{rank:19,order:19,bib:6,fisCode:"325118",lastname:"NOH",firstname:"Jin-soul",sex:"L",nation:"KOR",yearOfBirth:1996,status:""},{rank:20,order:20,bib:14,fisCode:"45384",lastname:"BROWN",firstname:"Rebecca",sex:"L",nation:"AUS",yearOfBirth:1997,status:""},{rank:21,order:21,bib:20,fisCode:"125021",lastname:"XIA",firstname:"Lina",sex:"L",nation:"CHN",yearOfBirth:1987,status:""},{rank:22,order:22,bib:2,fisCode:"307714",lastname:"KANG",firstname:"Rine",sex:"L",nation:"JPN",yearOfBirth:1997,status:""},{rank:23,order:23,bib:1,fisCode:"307818",lastname:"SAITO",firstname:"Miyu",sex:"L",nation:"JPN",yearOfBirth:1998,status:""},{rank:24,order:24,bib:21,fisCode:"125038",lastname:"FANYING",firstname:"Kong",sex:"L",nation:"CHN",yearOfBirth:1996,status:""},{rank:25,order:25,bib:9,fisCode:"325115",lastname:"CHOE",firstname:"Jeong-hyeon",sex:"L",nation:"KOR",yearOfBirth:1996,status:""},{rank:26,order:26,bib:5,fisCode:"307460",lastname:"MATSUURA",firstname:"Yukino",sex:"L",nation:"JPN",yearOfBirth:1995,status:""},{rank:27,order:27,bib:4,fisCode:"307711",lastname:"ITO",firstname:"Momoka",sex:"L",nation:"JPN",yearOfBirth:1997,status:""},{rank:28,order:28,bib:38,fisCode:"307947",lastname:"TOMII",firstname:"Yukina",sex:"L",nation:"JPN",yearOfBirth:1999,status:""},{rank:29,order:29,bib:8,fisCode:"307791",lastname:"TAKAHASHI",firstname:"Risa",sex:"L",nation:"JPN",yearOfBirth:1998,status:""},{rank:30,order:30,bib:13,fisCode:"485525",lastname:"BUREEVA",firstname:"Vladislava",sex:"L",nation:"RUS",yearOfBirth:1989,status:""},{rank:31,order:31,bib:36,fisCode:"125043",lastname:"ZHU",firstname:"Tianhui",sex:"L",nation:"CHN",yearOfBirth:1994,status:""},{rank:32,order:32,bib:37,fisCode:"307889",lastname:"HIROSE",firstname:"Chisaki",sex:"L",nation:"JPN",yearOfBirth:1999,status:""},{rank:33,order:33,bib:30,fisCode:"135013",lastname:"CHEN",firstname:"Wei-Hsuan",sex:"L",nation:"TPE",yearOfBirth:1998,status:""},{rank:34,order:34,bib:31,fisCode:"135012",lastname:"WU",firstname:"Meng-Chien",sex:"L",nation:"TPE",yearOfBirth:1998,status:""},{rank:35,order:35,bib:32,fisCode:"135015",lastname:"HUANG",firstname:"Pin-Ting",sex:"L",nation:"TPE",yearOfBirth:1999,status:""}]}}static getDisciplineName(e){return({SL:"回转",GS:"大回转",SG:"超级大回转",DH:"速降",AC:"全能"})[e]||e}static getSexName(e){return"L"===e?"女子":"男子"}static getNationFlag(e){return({CHN:"\uD83C\uDDE8\uD83C\uDDF3",JPN:"\uD83C\uDDEF\uD83C\uDDF5",KOR:"\uD83C\uDDF0\uD83C\uDDF7",AUS:"\uD83C\uDDE6\uD83C\uDDFA",RUS:"\uD83C\uDDF7\uD83C\uDDFA",TPE:"\uD83C\uDDF9\uD83C\uDDFC"})[e]||"\uD83C\uDFC1"}}var l=a(5628),c=a(7689),d=a(2208),o=a(3327),m=a(9474),x=a(1047),u=a(3774),h=a(5805),f=a(4401),p=a(7737),y=a(6211),g=a(1723),b=a(4586),v=a(9763);let N=(0,v.Z)("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),j=(0,v.Z)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);var k=a(3247),w=a(8896),C=a(2735),L=a(8736);function O(){let[e,t]=(0,n.useState)(null),[a,v]=(0,n.useState)(""),[O,H]=(0,n.useState)("all"),[Z,S]=(0,n.useState)(!0),[A,D]=(0,n.useState)(!1),[I,R]=(0,n.useState)(null),[T,B]=(0,n.useState)("upload"),[F,M]=(0,n.useState)(!1),E=async()=>{if(e){M(!0);try{await new Promise(e=>setTimeout(e,2e3)),B("confirm"),alert("成功导入 ".concat(e.competitors.length," 名运动员的比赛成绩！\n\n积分已自动计算完成，排名已更新。"))}catch(e){alert("导入过程中发生错误，请重试")}finally{M(!1)}}},U=()=>{t(null),B("upload"),R(null)},P=(null==e?void 0:e.competitors.filter(e=>{let t=e.lastname.toLowerCase().includes(a.toLowerCase())||e.firstname.toLowerCase().includes(a.toLowerCase())||e.fisCode.includes(a),s="all"===O||e.nation===O;return t&&s}))||[],z=Array.from(new Set((null==e?void 0:e.competitors.map(e=>e.nation))||[]));return i.getNationFlag,(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-40 h-40 opacity-15 rounded-full overflow-hidden",children:(0,s.jsx)("img",{src:(0,r.al)("/images/ski-action-2.jpg"),alt:"",className:"w-full h-full object-cover"})}),(0,s.jsx)("div",{className:"absolute bottom-10 left-10 w-36 h-36 opacity-15 rounded-full overflow-hidden",children:(0,s.jsx)("img",{src:(0,r.al)("/images/giant-slalom.jpg"),alt:"",className:"w-full h-full object-cover"})}),(0,s.jsx)("div",{className:"absolute top-1/3 right-1/4 w-24 h-24 opacity-10 rounded-full overflow-hidden",children:(0,s.jsx)("img",{src:(0,r.al)("/images/skiing-1.jpg"),alt:"",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"text-center mb-8 relative z-10",children:[(0,s.jsx)("h1",{className:"section-title",children:"比赛成绩导入"}),(0,s.jsx)("p",{className:"text-gray-600 text-lg",children:"导入中国标准格式的比赛成绩数据，使用v4.0公式自动计算积分和排名"})]}),(0,s.jsx)("div",{className:"flex justify-center mb-8 relative z-10",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg ".concat("upload"===T?"bg-ski-blue text-white":["review","confirm"].includes(T)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-medium",children:"1. 上传文件"})]}),(0,s.jsx)("div",{className:"w-8 h-0.5 ".concat(["review","confirm"].includes(T)?"bg-green-400":"bg-gray-300")}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg ".concat("review"===T?"bg-ski-blue text-white":"confirm"===T?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-medium",children:"2. 审核数据"})]}),(0,s.jsx)("div",{className:"w-8 h-0.5 ".concat("confirm"===T?"bg-green-400":"bg-gray-300")}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 rounded-lg ".concat("confirm"===T?"bg-ski-blue text-white":"bg-gray-100 text-gray-600"),children:[(0,s.jsx)(o.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-medium",children:"3. 确认导入"})]})]})}),"upload"===T&&(0,s.jsx)("div",{className:"card mb-8 relative z-10",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(c.Z,{className:"h-16 w-16 text-ski-blue mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-ski-navy mb-2",children:"上传比赛成绩文件"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"支持国际标准格式的比赛成绩文件，系统将使用v4.0简化公式自动解析并计算积分"}),I&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-600 text-sm",children:I})}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("label",{className:"btn-primary flex items-center cursor-pointer",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),A?"解析中...":"选择XML文件",(0,s.jsx)("input",{type:"file",accept:".xml",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!s)return;D(!0),R(null);let n=new FileReader;n.onload=e=>{try{var a;let s=null===(a=e.target)||void 0===a?void 0:a.result;if(!s)throw Error("无法读取文件内容");if(!s.includes("<Fisresults>")||!s.includes("</Fisresults>"))throw Error("文件不是有效的XML格式");let n=i.parseCompetitionXML(s);t(n),B("review")}catch(e){R(e instanceof Error?e.message:"文件解析失败，请检查XML格式是否正确")}finally{D(!1)}},n.onerror=()=>{R("文件读取失败，请重试"),D(!1)},n.readAsText(s,"utf-8")},className:"hidden",disabled:A})]})}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"请上传符合国际标准的XML格式比赛数据文件"})]})}),"review"===T&&e&&(0,s.jsx)("div",{className:"card mb-8 relative z-10",children:(0,s.jsxs)("div",{className:"text-center py-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-ski-navy mb-4",children:"数据审核完成"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:["已成功解析 ",(0,s.jsx)("span",{className:"font-semibold text-ski-blue",children:e.competitors.length})," 名运动员的比赛成绩"]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,s.jsxs)("button",{onClick:U,className:"btn-secondary flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"重新上传"]}),(0,s.jsx)("button",{onClick:E,disabled:F,className:"btn-primary flex items-center",children:F?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"处理中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"确认导入成绩"]})})]})]})}),"confirm"===T&&e&&(0,s.jsx)("div",{className:"card mb-8 relative z-10",children:(0,s.jsxs)("div",{className:"text-center py-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(o.Z,{className:"h-8 w-8 text-green-600"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"成绩导入成功！"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-6",children:[e.competitors.length," 名运动员的比赛成绩已成功导入系统，积分已自动计算并更新排名"]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,s.jsxs)("button",{onClick:U,className:"btn-secondary flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"导入新成绩"]}),(0,s.jsxs)("button",{onClick:()=>window.location.href="/points/rankings",className:"btn-primary flex items-center",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"查看积分排名"]})]})]})}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"card mb-8 relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-ski-navy flex items-center",children:[(0,s.jsx)(m.Z,{className:"h-8 w-8 text-yellow-600 mr-3"}),"赛事基本信息"]}),(0,s.jsxs)("button",{onClick:()=>S(!Z),className:"btn-secondary flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),Z?"隐藏详情":"显示详情"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-3 flex items-center",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"赛事信息"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"赛事级别:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceHeader.level})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"赛季:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceHeader.season})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"代码:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceHeader.codex})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"国家:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[i.getNationFlag(e.raceHeader.nation)," ",e.raceHeader.nation]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"项目:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[i.getDisciplineName(e.raceHeader.discipline)," (",e.raceHeader.discipline,")"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"类别:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceHeader.category})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"性别:"}),(0,s.jsx)("div",{className:"text-gray-700",children:i.getSexName(e.raceHeader.sex)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"类型:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceHeader.type})]})]})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-3 flex items-center",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5 mr-2"}),"比赛详情"]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"比赛日期:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceHeader.raceDate.formatted})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"赛事名称:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceHeader.eventName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"举办地点:"}),(0,s.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),e.raceHeader.place]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"技术代表:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[e.raceHeader.td.lastname,i.getNationFlag(e.raceHeader.td.nation)," (",e.raceHeader.td.nation,")",(0,s.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["#",e.raceHeader.td.number]})]})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-3 flex items-center",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"裁判团队"]}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"主裁判:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[e.jury.referee.firstname," ",e.jury.referee.lastname,i.getNationFlag(e.jury.referee.nation)," (",e.jury.referee.nation,")"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"赛事主管:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[e.jury.chiefRace.firstname," ",e.jury.chiefRace.lastname,i.getNationFlag(e.jury.chiefRace.nation)," (",e.jury.chiefRace.nation,")"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-3 flex items-center",children:[(0,s.jsx)(f.Z,{className:"h-5 w-5 mr-2"}),"技术参数"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"适用Penalty:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceInfo.appliedPenalty})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"计算Penalty:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceInfo.calculatedPenalty})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"F值:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceInfo.fValue})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"计时系统:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceInfo.timingBy})]})]})]})]})]})]}),Z&&(0,s.jsxs)("div",{className:"card mb-8 relative z-10",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-ski-navy mb-6 flex items-center",children:[(0,s.jsx)(p.Z,{className:"h-8 w-8 text-green-600 mr-3"}),"赛道信息"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.courses.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-4 flex items-center",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5 mr-2"}),"第",e.run,"轮 - ",e.name]}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"开始时间:"}),(0,s.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-1"}),e.startTime]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"门数:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[e.gates," (转向门:",e.turningGates,")"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"起点海拔:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[e.startElev,"米"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"终点海拔:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[e.finishElev,"米"]})]})]}),e.homologation&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Homologation:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.homologation})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"赛道设置者:"}),(0,s.jsxs)("div",{className:"text-gray-700",children:[e.courseSetter.lastname,i.getNationFlag(e.courseSetter.nation)," (",e.courseSetter.nation,")"]})]})]})]},t))}),(0,s.jsxs)("div",{className:"mt-6 bg-blue-50 rounded-lg p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-ski-navy mb-4 flex items-center",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"天气情况"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"雪质:"}),(0,s.jsx)("div",{className:"text-gray-700",children:e.raceInfo.weather.snow})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"天气:"}),(0,s.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,s.jsx)(N,{className:"h-4 w-4 mr-1"}),e.raceInfo.weather.weather]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"起点气温:"}),(0,s.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,s.jsx)(j,{className:"h-4 w-4 mr-1"}),e.raceInfo.weather.temperatureAirStart,"\xb0C"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"终点气温:"}),(0,s.jsxs)("div",{className:"text-gray-700 flex items-center",children:[(0,s.jsx)(j,{className:"h-4 w-4 mr-1"}),e.raceInfo.weather.temperatureAirFinish,"\xb0C"]})]})]})]})]}),(0,s.jsx)("div",{className:"card mb-6 relative z-10",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(k.Z,{className:"h-5 w-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,s.jsx)("input",{type:"text",placeholder:"搜索选手姓名或FIS代码...",value:a,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ski-blue focus:border-transparent"})]}),(0,s.jsxs)("select",{value:O,onChange:e=>H(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ski-blue",children:[(0,s.jsx)("option",{value:"all",children:"所有国家"}),z.map(e=>(0,s.jsxs)("option",{value:e,children:[i.getNationFlag(e)," ",e]},e))]})]})}),(0,s.jsxs)("div",{className:"card relative z-10",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-ski-navy flex items-center",children:[(0,s.jsx)(w.Z,{className:"h-8 w-8 text-red-600 mr-3"}),"选手排名信息"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["共 ",P.length," 名选手"]})]}),(0,s.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:(0,s.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 sticky top-0 z-10",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"排名"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"出发顺序"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"号码布"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"FIS代码"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"姓氏"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"名字"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"性别"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"国家"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"出生年份"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(e.rank<=3?"bg-yellow-50":t%2==0?"bg-white":"bg-gray-50"),children:[(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[e.rank<=3&&(0,s.jsx)(m.Z,{className:"h-4 w-4 mr-1 ".concat(1===e.rank?"text-yellow-500":2===e.rank?"text-gray-400":"text-orange-600")}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.rank})]})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.order}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.bib})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:e.fisCode}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.lastname}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.firstname}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:i.getSexName(e.sex)}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,s.jsxs)("span",{className:"flex items-center",children:[i.getNationFlag(e.nation),(0,s.jsx)("span",{className:"ml-2",children:e.nation})]})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:e.yearOfBirth})]},e.fisCode))})]})})})]}),(0,s.jsxs)("div",{className:"flex justify-center space-x-4 mt-8 relative z-10",children:[(0,s.jsxs)("button",{className:"btn-primary flex items-center",onClick:()=>{if(!(null==e?void 0:e.competitors)||0===e.competitors.length){alert("没有数据可导出");return}let t={filename:"".concat(e.raceHeader.eventName,"_").concat(new Date().toISOString().split("T")[0]),data:e.competitors.map((e,t)=>({排名:t+1,号码:e.bib,姓名:"".concat(e.firstname," ").concat(e.lastname),国家:e.nation,FIS编码:e.fisCode,状态:e.status})),title:e.raceHeader.eventName};(0,l.pq)(t)},children:[(0,s.jsx)(C.Z,{className:"h-5 w-5 mr-2"}),"导出Excel"]}),(0,s.jsxs)("button",{className:"btn-secondary flex items-center",onClick:()=>{if(!e){alert("请先导入比赛数据");return}let t=new Blob(['\n      <!DOCTYPE html>\n      <html lang="zh-CN">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>'.concat(e.raceHeader.eventName,' - 比赛报告</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }\n          .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }\n          .header { text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2563eb; padding-bottom: 20px; }\n          .title { color: #1e40af; font-size: 2.5em; margin: 0; }\n          .subtitle { color: #64748b; font-size: 1.2em; margin: 10px 0; }\n          .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0; }\n          .info-card { background: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid #3b82f6; }\n          .info-label { font-weight: bold; color: #374151; margin-bottom: 5px; }\n          .info-value { color: #1f2937; font-size: 1.1em; }\n          .results-table { width: 100%; border-collapse: collapse; margin: 30px 0; }\n          .results-table th, .results-table td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }\n          .results-table th { background: #f3f4f6; font-weight: bold; color: #374151; }\n          .results-table tr:hover { background: #f9fafb; }\n          .rank-1 { background: #fef3c7 !important; }\n          .rank-2 { background: #e5e7eb !important; }\n          .rank-3 { background: #fed7aa !important; }\n          .statistics { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }\n          .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; text-align: center; }\n          .stat-number { font-size: 2em; font-weight: bold; margin-bottom: 5px; }\n          .stat-label { opacity: 0.9; }\n          .weather-info { background: #ecfccb; padding: 20px; border-radius: 8px; margin: 20px 0; }\n          .footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; color: #64748b; }\n          @media print { body { background: white; } .container { box-shadow: none; } }\n        </style>\n      </head>\n      <body>\n        <div class="container">\n          <div class="header">\n            <h1 class="title">').concat(e.raceHeader.eventName,'</h1>\n            <p class="subtitle">官方比赛结果报告</p>\n            <p class="subtitle">生成时间: ').concat(new Date().toLocaleString("zh-CN"),'</p>\n          </div>\n\n          <div class="info-grid">\n            <div class="info-card">\n              <div class="info-label">比赛日期</div>\n              <div class="info-value">').concat(e.raceHeader.raceDate.formatted,'</div>\n            </div>\n            <div class="info-card">\n              <div class="info-label">比赛地点</div>\n              <div class="info-value">').concat(e.raceHeader.place,'</div>\n            </div>\n            <div class="info-card">\n              <div class="info-label">比赛项目</div>\n              <div class="info-value">').concat(e.raceHeader.discipline,'</div>\n            </div>\n            <div class="info-card">\n              <div class="info-label">参赛人数</div>\n              <div class="info-value">').concat(e.competitors.length,'人</div>\n            </div>\n          </div>\n\n          <div class="statistics">\n            <div class="stat-card">\n              <div class="stat-number">').concat(e.competitors.length,'</div>\n              <div class="stat-label">总参赛人数</div>\n            </div>\n            <div class="stat-card">\n              <div class="stat-number">').concat(e.competitors.filter(e=>"OK"===e.status).length,'</div>\n              <div class="stat-label">正常状态</div>\n            </div>\n            <div class="stat-card">\n              <div class="stat-number">').concat(e.competitors.filter(e=>"DNF"===e.status).length,'</div>\n              <div class="stat-label">未完赛(DNF)</div>\n            </div>\n            <div class="stat-card">\n              <div class="stat-number">').concat(e.competitors.filter(e=>"DSQ"===e.status).length,'</div>\n              <div class="stat-label">取消资格(DSQ)</div>\n            </div>\n          </div>\n\n          <h2>参赛名单</h2>\n          <table class="results-table">\n            <thead>\n              <tr>\n                <th>排名</th>\n                <th>号码</th>\n                <th>姓名</th>\n                <th>国家</th>\n                <th>FIS编码</th>\n                <th>状态</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(e.competitors.map((e,t)=>{let a=e.rank||t+1,s=1===a?"rank-1":2===a?"rank-2":3===a?"rank-3":"";return'\n                  <tr class="'.concat(s,'">\n                    <td><strong>').concat(a,"</strong></td>\n                    <td>").concat(e.bib,"</td>\n                    <td><strong>").concat(e.firstname," ").concat(e.lastname,"</strong></td>\n                    <td>").concat(e.nation,"</td>\n                    <td>").concat(e.fisCode,"</td>\n                    <td>").concat(e.status,"</td>\n                  </tr>\n                ")}).join(""),'\n            </tbody>\n          </table>\n\n          <div class="footer">\n            <p>本报告由高山滑雪竞赛管理系统自动生成</p>\n            <p>符合中国滑雪协会(FIS)标准 | 官方认证</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    ')],{type:"text/html;charset=utf-8"}),a=document.createElement("a"),s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","".concat(e.raceHeader.eventName,"_详细报告_").concat(new Date().toISOString().split("T")[0],".html")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert("报告生成成功！已下载到本地。")},children:[(0,s.jsx)(L.Z,{className:"h-5 w-5 mr-2"}),"生成报告"]})]})]})]})}},5628:function(e,t,a){"use strict";function s(e){let{filename:t,data:a,columns:s}=e;if(!a||0===a.length){alert("没有数据可导出");return}let n=s||Object.keys(a[0]),r=new Blob(["\uFEFF"+[n.join(","),...a.map(e=>n.map(t=>{let a=e[t]||"";return"string"==typeof a&&(a.includes(",")||a.includes("\n")||a.includes('"'))?'"'.concat(a.replace(/"/g,'""'),'"'):a}).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),l=URL.createObjectURL(r);i.setAttribute("href",l),i.setAttribute("download","".concat(t,".csv")),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)}function n(e){let{filename:t,data:a,columns:s,title:n}=e;if(!a||0===a.length){alert("没有数据可导出");return}let r=s||Object.keys(a[0]),i=new Blob(['\n    <html>\n      <head>\n        <meta charset="utf-8">\n        <title>'.concat(n||t,"</title>\n        <style>\n          table { border-collapse: collapse; width: 100%; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n          th { background-color: #f2f2f2; font-weight: bold; }\n          .title { font-size: 18px; font-weight: bold; margin-bottom: 10px; }\n        </style>\n      </head>\n      <body>\n        ").concat(n?'<div class="title">'.concat(n,"</div>"):"","\n        <table>\n          <thead>\n            <tr>\n              ").concat(r.map(e=>"<th>".concat(e,"</th>")).join(""),"\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(a.map(e=>"<tr>".concat(r.map(t=>"<td>".concat(e[t]||"","</td>")).join(""),"</tr>")).join(""),"\n          </tbody>\n        </table>\n      </body>\n    </html>\n  ")],{type:"application/vnd.ms-excel"}),l=document.createElement("a"),c=URL.createObjectURL(i);l.setAttribute("href",c),l.setAttribute("download","".concat(t,".xls")),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(c)}function r(e){let{filename:t,data:a}=e;if(!a||0===a.length){alert("没有数据可导出");return}let s=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),n=document.createElement("a"),r=URL.createObjectURL(s);n.setAttribute("href",r),n.setAttribute("download","".concat(t,".json")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}function i(e){let t=e.map(e=>({排名:e.rank,运动员:e.name,"国家/地区":e.nationality,项目:e.discipline,中国积分:e.points,趋势:"up"===e.trend?"上升":"down"===e.trend?"下降":"稳定",最近比赛:e.lastRace,参赛次数:e.totalRaces,最佳成绩:e.bestResult}));return{filename:"中国积分排行榜_".concat(new Date().toISOString().split("T")[0]),data:t,title:"中国积分排行榜"}}function l(e,t){let a=e.map(e=>({比赛日期:e.date,比赛名称:e.competition,项目:e.discipline,排名:e.rank,成绩时间:e.time,比赛积分:e.racePoints,惩罚值:e.penalty,最终积分:e.finalPoints,比赛地点:e.location}));return{filename:"".concat(t,"_比赛历史_").concat(new Date().toISOString().split("T")[0]),data:a,title:"".concat(t," - 比赛历史记录")}}function c(e,t){let a=e.map(e=>({排名:e.rank,运动员:e.athlete,"国家/地区":e.country,成绩:e.time,差距:e.gap,中国积分:e.fisPoints}));return{filename:"".concat(t,"_比赛结果_").concat(new Date().toISOString().split("T")[0]),data:a,title:"".concat(t," - 比赛结果")}}a.d(t,{GS:function(){return s},Lj:function(){return l},Uy:function(){return i},cs:function(){return r},l_:function(){return c},pq:function(){return n}})},4007:function(e,t,a){"use strict";a.d(t,{al:function(){return n}});var s=a(257);function n(e){let t=e.startsWith("/")?e:"/".concat(e);return"true"===s.env.GITHUB_PAGES||window.location.pathname.startsWith("/ski/")?"/ski".concat(t):t}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3761)}),_N_E=e.O()}]);