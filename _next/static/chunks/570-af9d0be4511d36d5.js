(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{7769:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},2208:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6337:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2369:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},257:function(e,t,a){"use strict";var r,n;e.exports=(null==(r=a.g.process)?void 0:r.env)&&"object"==typeof(null==(n=a.g.process)?void 0:n.env)?a.g.process:a(4227)},4227:function(e){!function(){var t={229:function(e){var t,a,r,n=e.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var u=[],E=!1,c=-1;function T(){E&&r&&(E=!1,r.length?u=r.concat(u):c=-1,u.length&&A())}function A(){if(!E){var e=s(T);E=!0;for(var t=u.length;t;){for(r=u,u=[];++c<t;)r&&r[c].run();c=-1,t=u.length}r=null,E=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function U(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];u.push(new l(e,t)),1!==u.length||E||s(A)},l.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=U,n.addListener=U,n.once=U,n.off=U,n.removeListener=U,n.removeAllListeners=U,n.emit=U,n.prependListener=U,n.prependOnceListener=U,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var i=a[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete a[e]}return i.exports}r.ab="//";var n=r(229);e.exports=n}()},4362:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return c},a:function(){return T}});var r=a(7437),n=a(2265),i=a(3700);let o={[i.i4.PUBLIC]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ],[i._z.NEWS]:[i.aU.READ],[i._z.CONTACT]:[i.aU.READ]},[i.i4.ATHLETE]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ],[i._z.NEWS]:[i.aU.READ],[i._z.CONTACT]:[i.aU.READ],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ],[i._z.COMPETITIONS]:[i.aU.READ],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE]},[i.i4.COACH]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ],[i._z.NEWS]:[i.aU.READ],[i._z.CONTACT]:[i.aU.READ],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ],[i._z.COMPETITIONS]:[i.aU.READ],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE]},[i.i4.ADMIN]:{[i._z.HOME]:[i.aU.READ],[i._z.ABOUT]:[i.aU.READ,i.aU.UPDATE],[i._z.NEWS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.CONTACT]:[i.aU.READ,i.aU.UPDATE],[i._z.PROFILE]:[i.aU.READ,i.aU.UPDATE],[i._z.MY_POINTS]:[i.aU.READ],[i._z.POINTS_QUERY]:[i.aU.READ],[i._z.POINTS_RANKING]:[i.aU.READ],[i._z.POINTS_CALCULATOR]:[i.aU.READ],[i._z.POINTS_TRENDS]:[i.aU.READ],[i._z.RULES_POINTS]:[i.aU.READ,i.aU.UPDATE],[i._z.COMPETITIONS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.COMPETITIONS_SCHEDULE]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE],[i._z.RESULTS_IMPORT]:[i.aU.READ,i.aU.WRITE],[i._z.RESULTS_ANNOUNCEMENT]:[i.aU.READ,i.aU.WRITE],[i._z.REGISTRATION]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.EVENTS]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.ADMIN_DASHBOARD]:[i.aU.READ],[i._z.POINTS_CALCULATION]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE],[i._z.USER_MANAGEMENT]:[i.aU.READ,i.aU.WRITE,i.aU.UPDATE,i.aU.DELETE],[i._z.STATISTICS]:[i.aU.READ],[i._z.SYSTEM_CONFIG]:[i.aU.READ,i.aU.UPDATE]}},s=(e,t)=>{switch(t.type){case"LOGIN_SUCCESS":return{...e,user:t.payload,isAuthenticated:!0,isLoading:!1,error:null};case"LOGIN_FAILURE":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:t.payload};case"LOGOUT":return{...e,user:null,isAuthenticated:!1,isLoading:!1,error:null};case"SET_LOADING":return{...e,isLoading:t.payload};case"CLEAR_ERROR":return{...e,error:null};default:return e}},u={user:null,isAuthenticated:!1,isLoading:!1,error:null},E=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,n.useReducer)(s,u),T=async e=>{c({type:"SET_LOADING",payload:!0});try{if(await new Promise(e=>setTimeout(e,1e3)),"admin@ski.com"===e.email&&"admin123"===e.password){let t={id:"1",username:"admin",email:e.email,role:i.i4.ADMIN,status:i.J0.ACTIVE,createdAt:new Date,lastLoginAt:new Date};c({type:"LOGIN_SUCCESS",payload:t}),localStorage.setItem("auth_user",JSON.stringify(t))}else if("athlete@ski.com"===e.email&&"athlete123"===e.password){let t={id:"2",username:"athlete_user",email:e.email,role:i.i4.ATHLETE,status:i.J0.ACTIVE,athleteId:"ATH001",createdAt:new Date,lastLoginAt:new Date};c({type:"LOGIN_SUCCESS",payload:t}),localStorage.setItem("auth_user",JSON.stringify(t))}else if("coach@ski.com"===e.email&&"coach123"===e.password){let t={id:"3",username:"coach_user",email:e.email,role:i.i4.COACH,status:i.J0.ACTIVE,coachId:"COACH001",createdAt:new Date,lastLoginAt:new Date};c({type:"LOGIN_SUCCESS",payload:t}),localStorage.setItem("auth_user",JSON.stringify(t))}else throw Error("邮箱或密码错误，请使用以下测试账号：\n管理员：admin@ski.com / admin123\n运动员：athlete@ski.com / athlete123\n教练：coach@ski.com / coach123")}catch(e){c({type:"LOGIN_FAILURE",payload:e instanceof Error?e.message:"登录失败"})}},A=async e=>{c({type:"SET_LOADING",payload:!0});try{await new Promise(e=>setTimeout(e,1500));let t={id:Date.now().toString(),username:e.username,email:e.email,role:"athlete"===e.userType?i.i4.ATHLETE:i.i4.COACH,status:i.J0.PENDING,athleteId:"athlete"===e.userType?"ATH".concat(Date.now()):void 0,coachId:"coach"===e.userType?"COACH".concat(Date.now()):void 0,createdAt:new Date};c({type:"LOGIN_SUCCESS",payload:t}),localStorage.setItem("auth_user",JSON.stringify(t))}catch(e){c({type:"LOGIN_FAILURE",payload:e instanceof Error?e.message:"注册失败"})}};(0,n.useEffect)(()=>{let e=localStorage.getItem("auth_user");if(e)try{let t=JSON.parse(e);c({type:"LOGIN_SUCCESS",payload:t})}catch(e){localStorage.removeItem("auth_user")}},[]);let l={...a,login:T,register:A,logout:()=>{localStorage.removeItem("auth_user"),c({type:"LOGOUT"})},hasPermission:(e,t)=>{var r,n;return a.user?(null===(r=o[a.user.role][e])||void 0===r?void 0:r.includes(t))||!1:(null===(n=o[i.i4.PUBLIC][e])||void 0===n?void 0:n.includes(t))||!1},clearError:()=>{c({type:"CLEAR_ERROR"})}};return(0,r.jsx)(E.Provider,{value:l,children:t})}function T(){let e=(0,n.useContext)(E);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3700:function(e,t,a){"use strict";var r,n,i,o,s,u,E,c;a.d(t,{J0:function(){return n},_z:function(){return i},aU:function(){return o},i4:function(){return r}}),(s=r||(r={})).PUBLIC="public",s.ATHLETE="athlete",s.COACH="coach",s.ADMIN="admin",(u=n||(n={})).ACTIVE="active",u.INACTIVE="inactive",u.PENDING="pending",(E=i||(i={})).HOME="home",E.ABOUT="about",E.NEWS="news",E.CONTACT="contact",E.PROFILE="profile",E.MY_POINTS="my_points",E.POINTS_QUERY="points_query",E.POINTS_RANKING="points_ranking",E.POINTS_CALCULATOR="points_calculator",E.POINTS_TRENDS="points_trends",E.RULES_POINTS="rules_points",E.COMPETITIONS="competitions",E.COMPETITIONS_SCHEDULE="competitions_schedule",E.RESULTS_IMPORT="results_import",E.RESULTS_ANNOUNCEMENT="results_announcement",E.REGISTRATION="registration",E.EVENTS="events",E.ADMIN_DASHBOARD="admin_dashboard",E.POINTS_CALCULATION="points_calculation",E.USER_MANAGEMENT="user_management",E.STATISTICS="statistics",E.SYSTEM_CONFIG="system_config",(c=o||(o={})).READ="read",c.WRITE="write",c.DELETE="delete",c.UPDATE="update"},4007:function(e,t,a){"use strict";a.d(t,{al:function(){return n}});var r=a(257);function n(e){let t=e.startsWith("/")?e:"/".concat(e);return"true"===r.env.GITHUB_PAGES||window.location.pathname.startsWith("/ski/")?"/ski".concat(t):t}}}]);